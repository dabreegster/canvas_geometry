var hn=Object.defineProperty;var pn=(e,t,n)=>t in e?hn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ge=(e,t,n)=>(pn(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function D(){}function et(e,t){for(const n in t)e[n]=t[n];return e}function en(e){return e()}function at(){return Object.create(null)}function ie(e){e.forEach(en)}function tt(e){return typeof e=="function"}function q(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function dn(e){return Object.keys(e).length===0}function mn(e,...t){if(e==null){for(const o of t)o(void 0);return D}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function L(e,t,n){e.$$.on_destroy.push(mn(t,n))}function Ie(e,t,n,o){if(e){const i=tn(e,t,n,o);return e[0](i)}}function tn(e,t,n,o){return e[1]&&o?et(n.ctx.slice(),e[1](o(t))):n.ctx}function Be(e,t,n,o){if(e[2]&&o){const i=e[2](o(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],l=Math.max(t.dirty.length,i.length);for(let c=0;c<l;c+=1)r[c]=t.dirty[c]|i[c];return r}return t.dirty|i}return t.dirty}function Oe(e,t,n,o,i,r){if(i){const l=tn(t,n,o,r);e.p(l,i)}}function Te(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let o=0;o<n;o++)t[o]=-1;return t}return-1}function Le(e,t,n){return e.set(n),t}function _n(e){return e&&tt(e.destroy)?e.destroy:D}function h(e,t){e.appendChild(t)}function v(e,t,n){e.insertBefore(t,n||null)}function _(e){e.parentNode&&e.parentNode.removeChild(e)}function F(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function P(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function C(e){return document.createTextNode(e)}function T(){return C(" ")}function R(){return C("")}function I(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function De(e,t){for(const n in t)m(e,n,t[n])}function gn(e){return Array.from(e.childNodes)}function J(e,t){t=""+t,e.data!==t&&(e.data=t)}function nn(e,t){e.value=t??""}function $e(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function ut(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function vn(e){const t=e.querySelector(":checked");return t&&t.__value}function H(e,t,n){e.classList.toggle(t,!!n)}let Ze;function Me(e){Ze=e}function bn(){if(!Ze)throw new Error("Function called outside component initialization");return Ze}function wn(e){bn().$$.on_mount.push(e)}const ve=[],he=[];let be=[];const ft=[],yn=Promise.resolve();let He=!1;function kn(){He||(He=!0,yn.then(on))}function Re(e){be.push(e)}const Ue=new Set;let _e=0;function on(){if(_e!==0)return;const e=Ze;do{try{for(;_e<ve.length;){const t=ve[_e];_e++,Me(t),Sn(t.$$)}}catch(t){throw ve.length=0,_e=0,t}for(Me(null),ve.length=0,_e=0;he.length;)he.pop()();for(let t=0;t<be.length;t+=1){const n=be[t];Ue.has(n)||(Ue.add(n),n())}be.length=0}while(ve.length);for(;ft.length;)ft.pop()();He=!1,Ue.clear(),Me(e)}function Sn(e){if(e.fragment!==null){e.update(),ie(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Re)}}function $n(e){const t=[],n=[];be.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),be=t}const Ae=new Set;let ae;function nt(){ae={r:0,c:[],p:ae}}function ot(){ae.r||ie(ae.c),ae=ae.p}function N(e,t){e&&e.i&&(Ae.delete(e),e.i(t))}function A(e,t,n,o){if(e&&e.o){if(Ae.has(e))return;Ae.add(e),ae.c.push(()=>{Ae.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function z(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function rn(e,t){const n={},o={},i={$$scope:1};let r=e.length;for(;r--;){const l=e[r],c=t[r];if(c){for(const a in l)a in c||(o[a]=1);for(const a in c)i[a]||(n[a]=c[a],i[a]=1);e[r]=c}else for(const a in l)i[a]=1}for(const l in o)l in n||(n[l]=void 0);return n}function X(e){e&&e.c()}function G(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),Re(()=>{const r=e.$$.on_mount.map(en).filter(tt);e.$$.on_destroy?e.$$.on_destroy.push(...r):ie(r),e.$$.on_mount=[]}),i.forEach(Re)}function U(e,t){const n=e.$$;n.fragment!==null&&($n(n.after_update),ie(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Mn(e,t){e.$$.dirty[0]===-1&&(ve.push(e),kn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(e,t,n,o,i,r,l=null,c=[-1]){const a=Ze;Me(e);const s=e.$$={fragment:null,ctx:[],props:r,update:D,not_equal:i,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:at(),dirty:c,skip_bound:!1,root:t.target||a.$$.root};l&&l(s.root);let u=!1;if(s.ctx=n?n(e,t.props||{},(f,b,...p)=>{const g=p.length?p[0]:b;return s.ctx&&i(s.ctx[f],s.ctx[f]=g)&&(!s.skip_bound&&s.bound[f]&&s.bound[f](g),u&&Mn(e,f)),b}):[],s.update(),u=!0,ie(s.before_update),s.fragment=o?o(s.ctx):!1,t.target){if(t.hydrate){const f=gn(t.target);s.fragment&&s.fragment.l(f),f.forEach(_)}else s.fragment&&s.fragment.c();t.intro&&N(e.$$.fragment),G(e,t.target,t.anchor),on()}Me(a)}class te{constructor(){Ge(this,"$$");Ge(this,"$$set")}$destroy(){U(this,1),this.$destroy=D}$on(t,n){if(!tt(n))return D;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!dn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const En="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(En);var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zn=function(){var e="",t,n,o,i=[],r={passive:!0};window.addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on"),o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function l(p,g){var w=function(k){!k&&(k=window.event);var M={originalEvent:k,target:k.target||k.srcElement,type:"wheel",deltaMode:k.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){k.preventDefault?k.preventDefault():k.returnValue=!1}};return o=="mousewheel"?(M.deltaY=-.025*k.wheelDelta,k.wheelDeltaX&&(M.deltaX=-.025*k.wheelDeltaX)):M.deltaY=k.detail,g(M)};return i.push({element:p,fn:w}),w}function c(p){for(var g=0;g<i.length;g++)if(i[g].element===p)return i[g].fn;return function(){}}function a(p){for(var g=0;g<i.length;g++)if(i[g].element===p)return i.splice(g,1)}function s(p,g,w,k){var M;o==="wheel"?M=w:M=l(p,w),p[t](e+g,M,k?r:!1)}function u(p,g,w,k){var M;o==="wheel"?M=w:M=c(p),p[n](e+g,M,k?r:!1),a(p)}function f(p,g,w){s(p,o,g,w),o=="DOMMouseScroll"&&s(p,"MozMousePixelScroll",g,w)}function b(p,g,w){u(p,o,g,w),o=="DOMMouseScroll"&&u(p,"MozMousePixelScroll",g,w)}return{on:f,off:b}}(),it={extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,o=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&o<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var o=this,i,r,l,c=null,a=0;n||(n={});var s=function(){a=n.leading===!1?0:o.now(),c=null,l=e.apply(i,r),c||(i=r=null)};return function(){var u=o.now();!a&&n.leading===!1&&(a=u);var f=t-(u-a);return i=this,r=arguments,f<=0||f>t?(clearTimeout(c),c=null,a=u,l=e.apply(i,r),c||(i=r=null)):!c&&n.trailing!==!1&&(c=setTimeout(s,f)),l}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||pt(33):pt(t)}};function pt(e){return function(t){window.setTimeout(t,e)}}var Fe=it,ln="unknown";document.documentMode&&(ln="ie");var rt={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(Fe.isElement(t)?n=t:n=e.querySelector(t),!n){var o=Array.prototype.slice.call(e.childNodes||e.children).filter(function(a){return a.nodeName!=="defs"&&a.nodeName!=="#text"});o.length===1&&o[0].nodeName==="g"&&o[0].getAttribute("transform")===null&&(n=o[0])}if(!n){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",i);var r=e.childNodes||e.children;if(r&&r.length>0)for(var l=r.length;l>0;l--)r[r.length-l].nodeName!=="defs"&&n.appendChild(r[r.length-l]);e.appendChild(n)}var c=[];return n.getAttribute("class")&&(c=n.getAttribute("class").split(" ")),~c.indexOf("svg-pan-zoom_viewport")||(c.push("svg-pan-zoom_viewport"),n.setAttribute("class",c.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Fe.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var o=e[n];o.parentNode.insertBefore(o,o)}},ht?ht.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var o=this,i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",i),"transform"in e.style?e.style.transform=i:"-ms-transform"in e.style?e.style["-ms-transform"]=i:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=i),ln==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){o.refreshDefsGlobal()},o.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return Fe.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var o=e.createSVGPoint();return o.x=t,o.y=n,o}},j=rt,zn={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(j.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var o=document.createElementNS(j.svgNS,"style");o.setAttribute("id","svg-pan-zoom-controls-styles"),o.setAttribute("type","text/css"),o.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(o)}var i=document.createElementNS(j.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(j.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(j.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},_createZoomReset:function(e){var t=document.createElementNS(j.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(j.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o);var i=document.createElementNS(j.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(i),t},_createZoomOut:function(e){var t=document.createElementNS(j.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(j.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(j.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},Nn=rt,se=it,B=function(e,t){this.init(e,t)};B.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=se.proxy(this.updateCTM,this),this.requestAnimationFrame=se.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()};B.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(o){return o}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};B.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height};B.prototype.getViewBox=function(){return se.extend({},this.viewBox)};B.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,o=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=o}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e};B.prototype.getOriginalState=function(){return se.extend({},this.originalState)};B.prototype.getState=function(){return se.extend({},this.activeState)};B.prototype.getZoom=function(){return this.activeState.zoom};B.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};B.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom};B.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};B.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e};B.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var o=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),i=!1,r=!1;o===!1?(e.e=this.getPan().x,e.f=this.getPan().y,i=r=!0):se.isObject(o)&&(o.x===!1?(e.e=this.getPan().x,i=!0):se.isNumber(o.x)&&(e.e=o.x),o.y===!1?(e.f=this.getPan().y,r=!0):se.isNumber(o.y)&&(e.f=o.y)),i&&r||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}};B.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a};B.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f};B.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f};B.prototype.pendingUpdate=!1;B.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};B.prototype.updateCTM=function(){var e=this.getCTM();Nn.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var Pn=function(e,t){return new B(e,t)},sn=Zn,Xe=zn,Y=it,Q=rt,An=Pn,E=function(e,t){this.init(e,t)},xn={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},cn={passive:!0};E.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),Q.setupSvgAttributes(this.svg),this.options=Y.extend(Y.extend({},xn),t),this.state="none";var o=Q.getBoundingClientRectNormalized(e);this.width=o.width,this.height=o.height,this.viewport=An(Q.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(r,l){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(r,l)},onZoom:function(r){if(n.viewport&&n.options.onZoom)return n.options.onZoom(r)},beforePan:function(r,l){if(n.viewport&&n.options.beforePan)return n.options.beforePan(r,l)},onPan:function(r){if(n.viewport&&n.options.onPan)return n.options.onPan(r)},onUpdatedCTM:function(r){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(r)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&Xe.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};E.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={mousedown:function(r){var l=e.handleMouseDown(r,t);return t=r,l},touchstart:function(r){var l=e.handleMouseDown(r,t);return t=r,l},mouseup:function(r){return e.handleMouseUp(r)},touchend:function(r){return e.handleMouseUp(r)},mousemove:function(r){return e.handleMouseMove(r)},touchmove:function(r){return e.handleMouseMove(r)},mouseleave:function(r){return e.handleMouseUp(r)},touchleave:function(r){return e.handleMouseUp(r)},touchcancel:function(r){return e.handleMouseUp(r)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var o=n.length-1;o>=0;o--)this.eventListeners.hasOwnProperty(n[o])&&delete this.eventListeners[n[o]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?!1:cn);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};E.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;sn.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}};E.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;sn.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}};E.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,o=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/o;var i=this.svg.getScreenCTM().inverse(),r=Q.getEventPoint(e,this.svg).matrixTransform(i),l=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(l,r)}};E.prototype.zoomAtPoint=function(e,t,n){var o=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*o.zoom,Math.min(this.options.maxZoom*o.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*o.zoom?e=this.options.minZoom*o.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*o.zoom&&(e=this.options.maxZoom*o.zoom/this.getZoom());var i=this.viewport.getCTM(),r=t.matrixTransform(i.inverse()),l=this.svg.createSVGMatrix().translate(r.x,r.y).scale(e).translate(-r.x,-r.y),c=i.multiply(l);c.a!==i.a&&this.viewport.setCTM(c)};E.prototype.zoom=function(e,t){this.zoomAtPoint(e,Q.getSvgCenterPoint(this.svg,this.width,this.height),t)};E.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)};E.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),Y.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=Q.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)};E.prototype.getZoom=function(){return this.viewport.getZoom()};E.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};E.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom};E.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)};E.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};E.prototype.reset=function(){this.resetZoom(),this.resetPan()};E.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var o=Q.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,o)};E.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),Y.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&Y.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=Q.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))};E.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=Q.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}};E.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")};E.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)};E.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)};E.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})};E.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};E.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)};E.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)};E.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}};E.prototype.resize=function(){var e=Q.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};E.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?!1:cn);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),le=le.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};E.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:Y.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:Y.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,Xe.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,Xe.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:Y.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:Y.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:Y.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var le=[],In=function(e,t){var n=Y.getSvg(e);if(n===null)return null;for(var o=le.length-1;o>=0;o--)if(le[o].svg===n)return le[o].instance.getPublicInstance();return le.push({svg:n,instance:new E(n,t)}),le[le.length-1].instance.getPublicInstance()},Bn=In;const On=Cn(Bn);function an(e){return e.map(t=>`${t[0]},${t[1]}`).join(" ")}function oe(e){return ze(e.exterior)}function ze(e){return e.map(t=>`${t.x},${t.y}`).join(" ")}function We(e){return{x1:e.start.x,y1:e.start.y,x2:e.end.x,y2:e.end.y}}let $;const un=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&un.decode();let ye=null;function Ee(){return(ye===null||ye.byteLength===0)&&(ye=new Uint8Array($.memory.buffer)),ye}function ue(e,t){return e=e>>>0,un.decode(Ee().subarray(e,e+t))}const ne=new Array(128).fill(void 0);ne.push(void 0,null,!0,!1);let Ce=ne.length;function dt(e){Ce===ne.length&&ne.push(ne.length+1);const t=Ce;return Ce=ne[t],ne[t]=e,t}function ce(e){return ne[e]}function Tn(e){e<132||(ne[e]=Ce,Ce=e)}function ke(e){const t=ce(e);return Tn(e),t}let Ne=0;function Ln(e,t){const n=t(e.length*1,1)>>>0;return Ee().set(e,n/1),Ne=e.length,n}let Se=null;function O(){return(Se===null||Se.byteLength===0)&&(Se=new Int32Array($.memory.buffer)),Se}const xe=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Dn=typeof xe.encodeInto=="function"?function(e,t){return xe.encodeInto(e,t)}:function(e,t){const n=xe.encode(e);return t.set(n),{read:e.length,written:n.length}};function Rn(e,t,n){if(n===void 0){const c=xe.encode(e),a=t(c.length,1)>>>0;return Ee().subarray(a,a+c.length).set(c),Ne=c.length,a}let o=e.length,i=t(o,1)>>>0;const r=Ee();let l=0;for(;l<o;l++){const c=e.charCodeAt(l);if(c>127)break;r[i+l]=c}if(l!==o){l!==0&&(e=e.slice(l)),i=n(i,o,o=l+e.length*3,1)>>>0;const c=Ee().subarray(i+l,i+o),a=Dn(e,c);l+=a.written}return Ne=l,i}class mt{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();$.__wbg_mapmodel_free(t)}constructor(t){try{const r=$.__wbindgen_add_to_stack_pointer(-16),l=Ln(t,$.__wbindgen_malloc),c=Ne;$.mapmodel_new(r,l,c);var n=O()[r/4+0],o=O()[r/4+1],i=O()[r/4+2];if(i)throw ke(o);return this.__wbg_ptr=n>>>0,this}finally{$.__wbindgen_add_to_stack_pointer(16)}}render(){let t,n;try{const s=$.__wbindgen_add_to_stack_pointer(-16);$.mapmodel_render(s,this.__wbg_ptr);var o=O()[s/4+0],i=O()[s/4+1],r=O()[s/4+2],l=O()[s/4+3],c=o,a=i;if(l)throw c=0,a=0,ke(r);return t=c,n=a,ue(c,a)}finally{$.__wbindgen_add_to_stack_pointer(16),$.__wbindgen_free(t,n,1)}}findRoadWidth(t){let n,o;try{const u=$.__wbindgen_add_to_stack_pointer(-16);$.mapmodel_findRoadWidth(u,this.__wbg_ptr,t);var i=O()[u/4+0],r=O()[u/4+1],l=O()[u/4+2],c=O()[u/4+3],a=i,s=r;if(c)throw a=0,s=0,ke(l);return n=a,o=s,ue(a,s)}finally{$.__wbindgen_add_to_stack_pointer(16),$.__wbindgen_free(n,o,1)}}findIntersectionGeometry(t){let n,o;try{const u=$.__wbindgen_add_to_stack_pointer(-16);$.mapmodel_findIntersectionGeometry(u,this.__wbg_ptr,t);var i=O()[u/4+0],r=O()[u/4+1],l=O()[u/4+2],c=O()[u/4+3],a=i,s=r;if(c)throw a=0,s=0,ke(l);return n=a,o=s,ue(a,s)}finally{$.__wbindgen_add_to_stack_pointer(16),$.__wbindgen_free(n,o,1)}}renderGraph(){let t,n;try{const r=$.__wbindgen_add_to_stack_pointer(-16);$.mapmodel_renderGraph(r,this.__wbg_ptr);var o=O()[r/4+0],i=O()[r/4+1];return t=o,n=i,ue(o,i)}finally{$.__wbindgen_add_to_stack_pointer(16),$.__wbindgen_free(t,n,1)}}traceGraphLoop(t,n){$.mapmodel_traceGraphLoop(this.__wbg_ptr,t,n)}undoGraph(){$.mapmodel_undoGraph(this.__wbg_ptr)}}async function Wn(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function Vn(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(t,n){const o=ue(t,n);return dt(o)},e.wbg.__wbindgen_object_drop_ref=function(t){ke(t)},e.wbg.__wbg_debug_34c9290896ec9856=function(t){console.debug(ce(t))},e.wbg.__wbg_error_e60eff06f24ab7a4=function(t){console.error(ce(t))},e.wbg.__wbg_info_d7d58472d0bab115=function(t){console.info(ce(t))},e.wbg.__wbg_log_a4530b4fe289336f=function(t){console.log(ce(t))},e.wbg.__wbg_warn_f260f49434e45e62=function(t){console.warn(ce(t))},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return dt(t)},e.wbg.__wbg_stack_658279fe44541cf6=function(t,n){const o=ce(n).stack,i=Rn(o,$.__wbindgen_malloc,$.__wbindgen_realloc),r=Ne;O()[t/4+1]=r,O()[t/4+0]=i},e.wbg.__wbg_error_f851667af71bcfc6=function(t,n){let o,i;try{o=t,i=n,console.error(ue(t,n))}finally{$.__wbindgen_free(o,i,1)}},e.wbg.__wbindgen_throw=function(t,n){throw new Error(ue(t,n))},e}function jn(e,t){return $=e.exports,fn.__wbindgen_wasm_module=t,Se=null,ye=null,$}async function fn(e){if($!==void 0)return $;typeof e>"u"&&(e="/canvas_geometry/assets/backend_bg.wasm");const t=Vn();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await Wn(await e,t);return jn(n,o)}const ge=[];function we(e,t=D){let n;const o=new Set;function i(c){if(q(e,c)&&(e=c,n)){const a=!ge.length;for(const s of o)s[1](),ge.push(s,e);if(a){for(let s=0;s<ge.length;s+=2)ge[s][0](ge[s+1]);ge.length=0}}}function r(c){i(c(e))}function l(c,a=D){const s=[c,a];return o.add(s),o.size===1&&(n=t(i,r)||D),c(e),()=>{o.delete(s),o.size===0&&n&&(n(),n=null)}}return{set:i,update:r,subscribe:l}}let fe=we(null),V=we({mode:"neutral"}),Ye=we(null),Je=we(!1),Ke=we(null),Qe=we(null);function _t(e,t,n){const o=e.slice();return o[18]=t[n],o}function gt(e,t,n){const o=e.slice();return o[18]=t[n],o}function vt(e,t,n){const o=e.slice();return o[18]=t[n],o}function bt(e){let t,n,o=z(e[4]),i=[];for(let c=0;c<o.length;c+=1)i[c]=wt(vt(e,o,c));let r=z(e[5]),l=[];for(let c=0;c<r.length;c+=1)l[c]=yt(gt(e,r,c));return{c(){for(let c=0;c<i.length;c+=1)i[c].c();t=R();for(let c=0;c<l.length;c+=1)l[c].c();n=R()},m(c,a){for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(c,a);v(c,t,a);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(c,a);v(c,n,a)},p(c,a){if(a&282){o=z(c[4]);let s;for(s=0;s<o.length;s+=1){const u=vt(c,o,s);i[s]?i[s].p(u,a):(i[s]=wt(u),i[s].c(),i[s].m(t.parentNode,t))}for(;s<i.length;s+=1)i[s].d(1);i.length=o.length}if(a&290){r=z(c[5]);let s;for(s=0;s<r.length;s+=1){const u=gt(c,r,s);l[s]?l[s].p(u,a):(l[s]=yt(u),l[s].c(),l[s].m(n.parentNode,n))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(c){c&&(_(t),_(n)),F(i,c),F(l,c)}}}function qn(e){let t,n,o;function i(){return e[12](e[18])}return{c(){t=P("polyline"),m(t,"points",an(e[18].geometry.coordinates)),m(t,"class","svelte-1gy75sc"),H(t,"clicked",e[1]==e[18])},m(r,l){v(r,t,l),n||(o=I(t,"click",i),n=!0)},p(r,l){e=r,l&18&&H(t,"clicked",e[1]==e[18])},d(r){r&&_(t),n=!1,o()}}}function Gn(e){let t,n,o;function i(){return e[11](e[18])}return{c(){t=P("polygon"),m(t,"points",oe(JSON.parse(e[18].properties.polygon))),m(t,"class","road-outline svelte-1gy75sc"),H(t,"clicked",e[1]==e[18])},m(r,l){v(r,t,l),n||(o=I(t,"click",i),n=!0)},p(r,l){e=r,l&18&&H(t,"clicked",e[1]==e[18])},d(r){r&&_(t),n=!1,o()}}}function wt(e){let t;function n(r,l){return r[3]&&r[18].properties.polygon?Gn:qn}let o=n(e),i=o(e);return{c(){i.c(),t=R()},m(r,l){i.m(r,l),v(r,t,l)},p(r,l){o===(o=n(r))&&i?i.p(r,l):(i.d(1),i=o(r),i&&(i.c(),i.m(t.parentNode,t)))},d(r){r&&_(t),i.d(r)}}}function yt(e){let t,n,o;function i(){return e[13](e[18])}return{c(){t=P("circle"),m(t,"cx",e[18].geometry.coordinates[0]),m(t,"cy",e[18].geometry.coordinates[1]),m(t,"r","1"),m(t,"class","svelte-1gy75sc"),H(t,"clicked",e[1]==e[18])},m(r,l){v(r,t,l),n||(o=I(t,"click",i),n=!0)},p(r,l){e=r,l&34&&H(t,"clicked",e[1]==e[18])},d(r){r&&_(t),n=!1,o()}}}function kt(e){let t,n,o;function i(){return e[14](e[18])}return{c(){t=P("polygon"),m(t,"points",an(e[18].geometry.coordinates[0])),m(t,"class","svelte-1gy75sc"),H(t,"clicked",e[1]==e[18])},m(r,l){v(r,t,l),n||(o=I(t,"click",i),n=!0)},p(r,l){e=r,l&66&&H(t,"clicked",e[1]==e[18])},d(r){r&&_(t),n=!1,o()}}}function St(e){let t,n,o,i,r,l=e[2].mode!="graph"&&bt(e),c=z(e[6]),a=[];for(let s=0;s<c.length;s+=1)a[s]=kt(_t(e,c,s));return{c(){t=P("svg"),l&&l.c(),n=R();for(let s=0;s<a.length;s+=1)a[s].c();o=P("g"),m(t,"class","svelte-1gy75sc")},m(s,u){v(s,t,u),l&&l.m(t,null),h(t,n);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(t,null);h(t,o),e[15](o),i||(r=_n(e[7].call(null,t)),i=!0)},p(s,u){if(s[2].mode!="graph"?l?l.p(s,u):(l=bt(s),l.c(),l.m(t,n)):l&&(l.d(1),l=null),u&322){c=z(s[6]);let f;for(f=0;f<c.length;f+=1){const b=_t(s,c,f);a[f]?a[f].p(b,u):(a[f]=kt(b),a[f].c(),a[f].m(t,o))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}},d(s){s&&_(t),l&&l.d(),F(a,s),e[15](null),i=!1,r()}}}function Un(e){let t=e[2],n,o=St(e);return{c(){o.c(),n=R()},m(i,r){o.m(i,r),v(i,n,r)},p(i,[r]){r&4&&q(t,t=i[2])?(o.d(1),o=St(i),o.c(),o.m(n.parentNode,n)):o.p(i,r)},i:D,o:D,d(i){i&&_(n),o.d(i)}}}function Fn(e,t,n){let o,i,r,l;L(e,Qe,y=>n(10,o=y)),L(e,Ye,y=>n(1,i=y)),L(e,V,y=>n(2,r=y)),L(e,Je,y=>n(3,l=y));let{gj:c}=t,a=c.features.filter(y=>y.geometry.type=="LineString"),s=c.features.filter(y=>y.geometry.type=="Point"),u=c.features.filter(y=>y.geometry.type=="Polygon"),f=null,b=null;function p(y){let x=On(y,{minZoom:.1,maxZoom:50,zoomScaleSensitivity:.5});return f&&(x.zoom(f),x.pan(b)),{update(){},destroy(){f=x.getZoom(),b=x.getPan()}}}function g(y){Le(Ye,i=y,i),i==null?V.set({mode:"neutral"}):i.geometry.type=="LineString"?V.set({mode:"find-width",road:i}):i.geometry.type=="Point"?V.set({mode:"intersection-geometry",intersection:i}):i.geometry.type=="Polygon"&&V.set({mode:"neutral"})}let w;const k=y=>g(y),M=y=>g(y),Z=y=>g(y),S=y=>g(y);function W(y){he[y?"unshift":"push"](()=>{w=y,n(0,w),n(10,o)})}return e.$$set=y=>{"gj"in y&&n(9,c=y.gj)},e.$$.update=()=>{e.$$.dirty&1025&&w&&o&&(n(0,w.innerHTML="",w),w.appendChild(o))},[w,i,r,l,a,s,u,p,g,c,o,k,M,Z,S,W]}class Hn extends te{constructor(t){super(),ee(this,t,Fn,Un,q,{gj:9})}}function $t(e){let t;return{c(){t=d("div"),t.textContent="Loading",m(t,"class","svelte-1uuov7f")},m(n,o){v(n,t,o)},d(n){n&&_(t)}}}function Xn(e){let t,n=e[0]&&$t();return{c(){n&&n.c(),t=R()},m(o,i){n&&n.m(o,i),v(o,t,i)},p(o,[i]){o[0]?n||(n=$t(),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:D,o:D,d(o){o&&_(t),n&&n.d(o)}}}function Yn(e,t,n){let{loading:o=!1}=t;return e.$$set=i=>{"loading"in i&&n(0,o=i.loading)},[o]}class Jn extends te{constructor(t){super(),ee(this,t,Yn,Xn,q,{loading:0})}}function Mt(e,t,n){const o=e.slice();return o[2]=t[n],o}function Et(e){let t,n=e[2]+"",o;return{c(){t=d("option"),o=C(n),t.__value=e[2],nn(t,t.__value)},m(i,r){v(i,t,r),h(t,o)},p:D,d(i){i&&_(t)}}}function Kn(e){let t,n,o,i,r,l,c,a,s,u,f,b,p,g,w,k;t=new Jn({props:{loading:e[0]}});let M=z(e[5]),Z=[];for(let S=0;S<M.length;S+=1)Z[S]=Et(Mt(e,M,S));return{c(){X(t.$$.fragment),n=T(),o=d("div"),i=d("div"),r=d("label"),l=C(`Load an osm.xml or a .pbf file:
      `),c=d("input"),a=T(),s=d("div"),u=d("label"),f=C(`Or load an example:
      `),b=d("select"),p=d("option"),p.textContent="Custom file loaded";for(let S=0;S<Z.length;S+=1)Z[S].c();m(c,"type","file"),p.__value="",nn(p,p.__value),e[2]===void 0&&Re(()=>e[7].call(b)),$e(o,"border","1px solid black"),$e(o,"padding","8px")},m(S,W){G(t,S,W),v(S,n,W),v(S,o,W),h(o,i),h(i,r),h(r,l),h(r,c),e[6](c),h(o,a),h(o,s),h(s,u),h(u,f),h(u,b),h(b,p);for(let y=0;y<Z.length;y+=1)Z[y]&&Z[y].m(b,null);ut(b,e[2],!0),g=!0,w||(k=[I(c,"change",e[4]),I(b,"change",e[7]),I(b,"change",e[3])],w=!0)},p(S,[W]){const y={};if(W&1&&(y.loading=S[0]),t.$set(y),W&32){M=z(S[5]);let x;for(x=0;x<M.length;x+=1){const pe=Mt(S,M,x);Z[x]?Z[x].p(pe,W):(Z[x]=Et(pe),Z[x].c(),Z[x].m(b,null))}for(;x<Z.length;x+=1)Z[x].d(1);Z.length=M.length}W&36&&ut(b,S[2])},i(S){g||(N(t.$$.fragment,S),g=!0)},o(S){A(t.$$.fragment,S),g=!1},d(S){S&&(_(n),_(o)),U(t,S),e[6](null),F(Z,S),w=!1,ie(k)}}}function Qn(e,t,n){let o;L(e,fe,p=>n(9,o=p));let i="st_georges_cycletrack",r=!1,l=!1;wn(async()=>{await fn();try{r=(await fetch(`/${i}/input.osm`,{method:"HEAD"})).ok,console.log("Using local cache"),c()}catch{}});async function c(){let p=r?`/${i}/input.osm`:`https://raw.githubusercontent.com/a-b-street/osm2streets/main/tests/src/${i}/input.osm`;try{n(0,l=!0);let w=await(await fetch(p)).arrayBuffer();Le(fe,o=new mt(new Uint8Array(w)),o),console.log(`Loaded ${i}`)}catch(g){window.alert(`Couldn't open from URL ${p}: ${g}`)}n(0,l=!1)}let a;async function s(p){try{n(0,l=!0);let g=await a.files[0].arrayBuffer();Le(fe,o=new mt(new Uint8Array(g)),o),n(2,i="")}catch(g){window.alert(`Couldn't open this file: ${g}`)}n(0,l=!1)}let u=["arizona_highways","aurora_sausage_link","borough_sausage_links","bristol_contraflow_cycleway","bristol_sausage_links","cycleway_rejoin_road","degenerate_bug","fremantle_placement","i5_exit_ramp","kingsway_junction","leeds_cycleway","montlake_roundabout","northgate_dual_carriageway","oneway_loop","overlapping_service_roads","perth_peanut_roundabout","perth_stretched_lights","quad_intersection","roosevelt_cycletrack","seattle_slip_lane","seattle_triangle","service_road_loop","st_georges_cycletrack","taipei","tempe_light_rail","tempe_split","tiny_loop","tiny_roundabout"];function f(p){he[p?"unshift":"push"](()=>{a=p,n(1,a)})}function b(){i=vn(this),n(2,i),n(5,u)}return[l,a,i,c,s,u,f,b]}class eo extends te{constructor(t){super(),ee(this,t,Qn,Kn,q,{})}}const to=e=>({}),Ct=e=>({}),no=e=>({}),Zt=e=>({});function oo(e){let t,n,o,i;const r=e[3].sidebar,l=Ie(r,e,e[2],Zt),c=e[3].map,a=Ie(c,e,e[2],Ct);return{c(){t=d("div"),l&&l.c(),n=T(),o=P("g"),a&&a.c()},m(s,u){v(s,t,u),l&&l.m(t,null),e[4](t),v(s,n,u),v(s,o,u),a&&a.m(o,null),e[5](o),i=!0},p(s,[u]){l&&l.p&&(!i||u&4)&&Oe(l,r,s,s[2],i?Be(r,s[2],u,no):Te(s[2]),Zt),a&&a.p&&(!i||u&4)&&Oe(a,c,s,s[2],i?Be(c,s[2],u,to):Te(s[2]),Ct)},i(s){i||(N(l,s),N(a,s),i=!0)},o(s){A(l,s),A(a,s),i=!1},d(s){s&&(_(t),_(n),_(o)),l&&l.d(s),e[4](null),a&&a.d(s),e[5](null)}}}function io(e,t,n){let o,i;L(e,Ke,s=>n(0,o=s)),L(e,Qe,s=>n(1,i=s));let{$$slots:r={},$$scope:l}=t;function c(s){he[s?"unshift":"push"](()=>{o=s,Ke.set(o)})}function a(s){he[s?"unshift":"push"](()=>{i=s,Qe.set(i)})}return e.$$set=s=>{"$$scope"in s&&n(2,l=s.$$scope)},[o,i,l,r,c,a]}class Ve extends te{constructor(t){super(),ee(this,t,io,oo,q,{})}}function zt(e,t,n){const o=e.slice();return o[4]=t[n],o}function Nt(e,t,n){const o=e.slice();o[7]=t[n];const i=o[7].left?"left":"right";return o[8]=i,o}function ro(e){let t,n,o,i,r,l=e[0].max_left_width.toFixed(2)+"",c,a,s,u,f=e[0].max_right_width.toFixed(2)+"",b,p,g,w,k,M;return{c(){t=d("div"),n=d("p"),n.textContent="Finding width of this road...",o=T(),i=d("p"),r=C("Max left: "),c=C(l),a=T(),s=d("p"),u=C("Max right: "),b=C(f),p=T(),g=d("div"),w=d("button"),w.textContent="Back",m(t,"slot","sidebar")},m(Z,S){v(Z,t,S),h(t,n),h(t,o),h(t,i),h(i,r),h(i,c),h(t,a),h(t,s),h(s,u),h(s,b),h(t,p),h(t,g),h(g,w),k||(M=I(w,"click",e[3]),k=!0)},p(Z,S){S&1&&l!==(l=Z[0].max_left_width.toFixed(2)+"")&&J(c,l),S&1&&f!==(f=Z[0].max_right_width.toFixed(2)+"")&&J(b,f)},d(Z){Z&&_(t),k=!1,M()}}}function lo(e){let t,n,o=[{class:n=e[8]},We(e[7].full_line)],i={};for(let r=0;r<o.length;r+=1)i=et(i,o[r]);return{c(){t=P("line"),De(t,i),H(t,"svelte-16t0vh7",!0)},m(r,l){v(r,t,l)},p(r,l){De(t,i=rn(o,[l&1&&n!==(n=r[8])&&{class:n},l&1&&We(r[7].full_line)])),H(t,"svelte-16t0vh7",!0)},d(r){r&&_(t)}}}function so(e){let t,n,o,i=e[7].hit[1].toFixed(2)+"",r,l,c=[{class:l=`${e[8]} hits`},We(e[7].hit[0])],a={};for(let s=0;s<c.length;s+=1)a=et(a,c[s]);return{c(){t=P("line"),n=P("title"),o=C("Length: "),r=C(i),De(t,a),H(t,"svelte-16t0vh7",!0)},m(s,u){v(s,t,u),h(t,n),h(n,o),h(n,r)},p(s,u){u&1&&i!==(i=s[7].hit[1].toFixed(2)+"")&&J(r,i),De(t,a=rn(c,[u&1&&l!==(l=`${s[8]} hits`)&&{class:l},u&1&&We(s[7].hit[0])])),H(t,"svelte-16t0vh7",!0)},d(s){s&&_(t)}}}function Pt(e){let t;function n(r,l){return r[7].hit?so:lo}let o=n(e),i=o(e);return{c(){i.c(),t=R()},m(r,l){i.m(r,l),v(r,t,l)},p(r,l){o===(o=n(r))&&i?i.p(r,l):(i.d(1),i=o(r),i&&(i.c(),i.m(t.parentNode,t)))},d(r){r&&_(t),i.d(r)}}}function At(e){let t,n,o,i=e[4][1]+"",r,l;return{c(){t=P("polyline"),n=P("title"),o=C("Angle score: "),r=C(i),m(t,"points",l=ze(e[4][0])),m(t,"class","svelte-16t0vh7")},m(c,a){v(c,t,a),h(t,n),h(n,o),h(n,r)},p(c,a){a&1&&i!==(i=c[4][1]+"")&&J(r,i),a&1&&l!==(l=ze(c[4][0]))&&m(t,"points",l)},d(c){c&&_(t)}}}function co(e){let t,n,o,i=z(e[0].test_lines),r=[];for(let a=0;a<i.length;a+=1)r[a]=Pt(Nt(e,i,a));let l=z(e[0].parallel_roads),c=[];for(let a=0;a<l.length;a+=1)c[a]=At(zt(e,l,a));return{c(){t=P("g");for(let a=0;a<r.length;a+=1)r[a].c();n=P("polygon");for(let a=0;a<c.length;a+=1)c[a].c();m(n,"points",o=oe(e[0].buffered_polygon)),m(n,"class","svelte-16t0vh7"),m(t,"slot","map")},m(a,s){v(a,t,s);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(t,null);h(t,n);for(let u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null)},p(a,s){if(s&1){i=z(a[0].test_lines);let u;for(u=0;u<i.length;u+=1){const f=Nt(a,i,u);r[u]?r[u].p(f,s):(r[u]=Pt(f),r[u].c(),r[u].m(t,n))}for(;u<r.length;u+=1)r[u].d(1);r.length=i.length}if(s&1&&o!==(o=oe(a[0].buffered_polygon))&&m(n,"points",o),s&1){l=z(a[0].parallel_roads);let u;for(u=0;u<l.length;u+=1){const f=zt(a,l,u);c[u]?c[u].p(f,s):(c[u]=At(f),c[u].c(),c[u].m(t,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=l.length}},d(a){a&&_(t),F(r,a),F(c,a)}}}function ao(e){let t,n;return t=new Ve({props:{$$slots:{map:[co],sidebar:[ro]},$$scope:{ctx:e}}}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},p(o,[i]){const r={};i&2049&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function uo(e,t,n){let o,i,r;L(e,V,c=>n(1,i=c)),L(e,fe,c=>n(2,r=c));const l=()=>V.set({mode:"neutral"});return e.$$.update=()=>{e.$$.dirty&6&&n(0,o=JSON.parse(r.findRoadWidth(i.road.properties.id)))},[o,i,r,l]}class fo extends te{constructor(t){super(),ee(this,t,uo,ao,q,{})}}function xt(e,t,n){const o=e.slice();return o[8]=t[n],o}function It(e,t,n){const o=e.slice();return o[11]=t[n],o}function ho(e){let t,n,o,i,r,l,c,a,s,u,f,b,p,g;return{c(){t=d("div"),n=d("p"),n.textContent="Graph mode",o=T(),i=d("div"),r=d("button"),r.textContent="Back",l=T(),c=d("div"),a=d("button"),a.textContent="Undo",s=T(),u=d("div"),f=d("input"),b=C("Keep last point"),m(f,"type","checkbox"),m(t,"slot","sidebar")},m(w,k){v(w,t,k),h(t,n),h(t,o),h(t,i),h(i,r),h(t,l),h(t,c),h(c,a),h(t,s),h(t,u),h(u,f),f.checked=e[1],h(u,b),p||(g=[I(r,"click",e[5]),I(a,"click",e[3]),I(f,"change",e[6])],p=!0)},p(w,k){k&2&&(f.checked=w[1])},d(w){w&&_(t),p=!1,ie(g)}}}function Bt(e){let t,n,o=JSON.stringify(e[11])+"",i,r;return{c(){t=P("polyline"),n=P("title"),i=C(o),m(t,"points",r=ze(e[11].linestring)),m(t,"class","svelte-334kq6")},m(l,c){v(l,t,c),h(t,n),h(n,i)},p(l,c){c&1&&o!==(o=JSON.stringify(l[11])+"")&&J(i,o),c&1&&r!==(r=ze(l[11].linestring))&&m(t,"points",r)},d(l){l&&_(t)}}}function Ot(e){let t,n,o=JSON.stringify(e[8])+"",i,r,l,c,a;function s(){return e[4](e[8])}return{c(){t=P("circle"),n=P("title"),i=C(o),m(t,"cx",r=e[8].point.x),m(t,"cy",l=e[8].point.y),m(t,"r","1"),m(t,"class","svelte-334kq6")},m(u,f){v(u,t,f),h(t,n),h(n,i),c||(a=I(t,"click",s),c=!0)},p(u,f){e=u,f&1&&o!==(o=JSON.stringify(e[8])+"")&&J(i,o),f&1&&r!==(r=e[8].point.x)&&m(t,"cx",r),f&1&&l!==(l=e[8].point.y)&&m(t,"cy",l)},d(u){u&&_(t),c=!1,a()}}}function po(e){let t,n,o=z(Object.values(e[0].edges)),i=[];for(let c=0;c<o.length;c+=1)i[c]=Bt(It(e,o,c));let r=z(Object.values(e[0].nodes)),l=[];for(let c=0;c<r.length;c+=1)l[c]=Ot(xt(e,r,c));return{c(){t=P("g");for(let c=0;c<i.length;c+=1)i[c].c();n=R();for(let c=0;c<l.length;c+=1)l[c].c();m(t,"slot","map")},m(c,a){v(c,t,a);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null);h(t,n);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null)},p(c,a){if(a&1){o=z(Object.values(c[0].edges));let s;for(s=0;s<o.length;s+=1){const u=It(c,o,s);i[s]?i[s].p(u,a):(i[s]=Bt(u),i[s].c(),i[s].m(t,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=o.length}if(a&5){r=z(Object.values(c[0].nodes));let s;for(s=0;s<r.length;s+=1){const u=xt(c,r,s);l[s]?l[s].p(u,a):(l[s]=Ot(u),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(c){c&&_(t),F(i,c),F(l,c)}}}function mo(e){let t,n;return t=new Ve({props:{$$slots:{map:[po],sidebar:[ho]},$$scope:{ctx:e}}}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},p(o,[i]){const r={};i&16387&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function _o(e,t,n){let o;L(e,fe,f=>n(7,o=f));let i=JSON.parse(o.renderGraph()),r=!1;function l(f){o.traceGraphLoop(f,r),n(0,i=JSON.parse(o.renderGraph()))}function c(){o.undoGraph(),n(0,i=JSON.parse(o.renderGraph()))}const a=f=>l(f.id),s=()=>V.set({mode:"neutral"});function u(){r=this.checked,n(1,r)}return[i,r,l,c,a,s,u]}class go extends te{constructor(t){super(),ee(this,t,_o,mo,q,{})}}function Tt(e,t,n){const o=e.slice();return o[10]=t[n],o}function Lt(e,t,n){const o=e.slice();return o[10]=t[n],o}function Dt(e,t,n){const o=e.slice();return o[10]=t[n],o}function vo(e){let t,n,o,i,r,l,c,a,s,u,f=e[3].thick_roads.length+"",b,p,g,w,k,M,Z,S=e[3].overlaps.flat().length+"",W,y,x,pe,de,me,lt,Pe=e[3].unioned.flat().length+"",je,st,qe,ct;return{c(){t=d("div"),n=d("p"),n.textContent="Intersection geometry",o=T(),i=d("div"),r=d("button"),r.textContent="Back",l=T(),c=d("div"),a=d("label"),s=d("input"),u=C(`Show thick roads
        (`),b=C(f),p=C(")"),g=T(),w=d("div"),k=d("label"),M=d("input"),Z=C("Show overlaps ("),W=C(S),y=C(")"),x=T(),pe=d("div"),de=d("label"),me=d("input"),lt=C("Show unioned ("),je=C(Pe),st=C(")"),m(s,"type","checkbox"),m(M,"type","checkbox"),m(me,"type","checkbox"),m(t,"slot","sidebar")},m(K,re){v(K,t,re),h(t,n),h(t,o),h(t,i),h(i,r),h(t,l),h(t,c),h(c,a),h(a,s),s.checked=e[0],h(a,u),h(a,b),h(a,p),h(t,g),h(t,w),h(w,k),h(k,M),M.checked=e[1],h(k,Z),h(k,W),h(k,y),h(t,x),h(t,pe),h(pe,de),h(de,me),me.checked=e[2],h(de,lt),h(de,je),h(de,st),qe||(ct=[I(r,"click",e[6]),I(s,"change",e[7]),I(M,"change",e[8]),I(me,"change",e[9])],qe=!0)},p(K,re){re&1&&(s.checked=K[0]),re&8&&f!==(f=K[3].thick_roads.length+"")&&J(b,f),re&2&&(M.checked=K[1]),re&8&&S!==(S=K[3].overlaps.flat().length+"")&&J(W,S),re&4&&(me.checked=K[2]),re&8&&Pe!==(Pe=K[3].unioned.flat().length+"")&&J(je,Pe)},d(K){K&&_(t),qe=!1,ie(ct)}}}function Rt(e){let t,n=z(e[3].thick_roads),o=[];for(let i=0;i<n.length;i+=1)o[i]=Wt(Dt(e,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=R()},m(i,r){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,r);v(i,t,r)},p(i,r){if(r&8){n=z(i[3].thick_roads);let l;for(l=0;l<n.length;l+=1){const c=Dt(i,n,l);o[l]?o[l].p(c,r):(o[l]=Wt(c),o[l].c(),o[l].m(t.parentNode,t))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(i){i&&_(t),F(o,i)}}}function Wt(e){let t,n;return{c(){t=P("polygon"),m(t,"points",n=oe(e[10])),m(t,"class","thick svelte-1n6m21w")},m(o,i){v(o,t,i)},p(o,i){i&8&&n!==(n=oe(o[10]))&&m(t,"points",n)},d(o){o&&_(t)}}}function Vt(e){let t,n=z(e[3].overlaps.flat()),o=[];for(let i=0;i<n.length;i+=1)o[i]=jt(Lt(e,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=R()},m(i,r){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,r);v(i,t,r)},p(i,r){if(r&8){n=z(i[3].overlaps.flat());let l;for(l=0;l<n.length;l+=1){const c=Lt(i,n,l);o[l]?o[l].p(c,r):(o[l]=jt(c),o[l].c(),o[l].m(t.parentNode,t))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(i){i&&_(t),F(o,i)}}}function jt(e){let t,n;return{c(){t=P("polygon"),m(t,"points",n=oe(e[10])),m(t,"class","overlaps svelte-1n6m21w")},m(o,i){v(o,t,i)},p(o,i){i&8&&n!==(n=oe(o[10]))&&m(t,"points",n)},d(o){o&&_(t)}}}function qt(e){let t,n=z(e[3].unioned.flat()),o=[];for(let i=0;i<n.length;i+=1)o[i]=Gt(Tt(e,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=R()},m(i,r){for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(i,r);v(i,t,r)},p(i,r){if(r&8){n=z(i[3].unioned.flat());let l;for(l=0;l<n.length;l+=1){const c=Tt(i,n,l);o[l]?o[l].p(c,r):(o[l]=Gt(c),o[l].c(),o[l].m(t.parentNode,t))}for(;l<o.length;l+=1)o[l].d(1);o.length=n.length}},d(i){i&&_(t),F(o,i)}}}function Gt(e){let t,n;return{c(){t=P("polygon"),m(t,"points",n=oe(e[10])),m(t,"class","unioned svelte-1n6m21w")},m(o,i){v(o,t,i)},p(o,i){i&8&&n!==(n=oe(o[10]))&&m(t,"points",n)},d(o){o&&_(t)}}}function bo(e){let t,n,o,i=e[0]&&Rt(e),r=e[1]&&Vt(e),l=e[2]&&qt(e);return{c(){t=P("g"),i&&i.c(),n=R(),r&&r.c(),o=R(),l&&l.c(),m(t,"slot","map")},m(c,a){v(c,t,a),i&&i.m(t,null),h(t,n),r&&r.m(t,null),h(t,o),l&&l.m(t,null)},p(c,a){c[0]?i?i.p(c,a):(i=Rt(c),i.c(),i.m(t,n)):i&&(i.d(1),i=null),c[1]?r?r.p(c,a):(r=Vt(c),r.c(),r.m(t,o)):r&&(r.d(1),r=null),c[2]?l?l.p(c,a):(l=qt(c),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(c){c&&_(t),i&&i.d(),r&&r.d(),l&&l.d()}}}function wo(e){let t,n;return t=new Ve({props:{$$slots:{map:[bo],sidebar:[vo]},$$scope:{ctx:e}}}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},p(o,[i]){const r={};i&131087&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function yo(e,t,n){let o,i,r;L(e,V,p=>n(4,i=p)),L(e,fe,p=>n(5,r=p));let l=!0,c=!0,a=!0;const s=()=>V.set({mode:"neutral"});function u(){l=this.checked,n(0,l)}function f(){c=this.checked,n(1,c)}function b(){a=this.checked,n(2,a)}return e.$$.update=()=>{e.$$.dirty&48&&n(3,o=JSON.parse(r.findIntersectionGeometry(i.intersection.properties.id)))},[l,c,a,o,i,r,s,u,f,b]}class ko extends te{constructor(t){super(),ee(this,t,yo,wo,q,{})}}const So=e=>({}),Ut=e=>({}),$o=e=>({}),Ft=e=>({});function Mo(e){let t,n,o,i;const r=e[1].left,l=Ie(r,e,e[0],Ft),c=e[1].main,a=Ie(c,e,e[0],Ut);return{c(){t=d("div"),l&&l.c(),n=T(),o=d("div"),a&&a.c(),m(t,"class","left svelte-1anhf6p"),m(o,"class","main svelte-1anhf6p")},m(s,u){v(s,t,u),l&&l.m(t,null),v(s,n,u),v(s,o,u),a&&a.m(o,null),i=!0},p(s,[u]){l&&l.p&&(!i||u&1)&&Oe(l,r,s,s[0],i?Be(r,s[0],u,$o):Te(s[0]),Ft),a&&a.p&&(!i||u&1)&&Oe(a,c,s,s[0],i?Be(c,s[0],u,So):Te(s[0]),Ut)},i(s){i||(N(l,s),N(a,s),i=!0)},o(s){A(l,s),A(a,s),i=!1},d(s){s&&(_(t),_(n),_(o)),l&&l.d(s),a&&a.d(s)}}}function Eo(e,t,n){let{$$slots:o={},$$scope:i}=t;return e.$$set=r=>{"$$scope"in r&&n(0,i=r.$$scope)},[i,o]}class Co extends te{constructor(t){super(),ee(this,t,Eo,Mo,q,{})}}function Ht(e,t,n){const o=e.slice();return o[3]=t[n][0],o[4]=t[n][1],o}function Xt(e){let t,n,o;function i(s,u){if(s[0].geometry.type=="LineString")return zo;if(s[0].geometry.type=="Point")return Zo}let r=i(e),l=r&&r(e),c=z(Object.entries(e[0].properties)),a=[];for(let s=0;s<c.length;s+=1)a[s]=Yt(Ht(e,c,s));return{c(){l&&l.c(),t=T(),n=d("table"),o=d("tbody");for(let s=0;s<a.length;s+=1)a[s].c()},m(s,u){l&&l.m(s,u),v(s,t,u),v(s,n,u),h(n,o);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(o,null)},p(s,u){if(r===(r=i(s))&&l?l.p(s,u):(l&&l.d(1),l=r&&r(s),l&&(l.c(),l.m(t.parentNode,t))),u&1){c=z(Object.entries(s[0].properties));let f;for(f=0;f<c.length;f+=1){const b=Ht(s,c,f);a[f]?a[f].p(b,u):(a[f]=Yt(b),a[f].c(),a[f].m(o,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=c.length}},d(s){s&&(_(t),_(n)),l&&l.d(s),F(a,s)}}}function Zo(e){let t,n,o,i;return{c(){t=d("div"),n=d("button"),n.textContent="Intersection geometry",m(n,"class","svelte-18ruhw5")},m(r,l){v(r,t,l),h(t,n),o||(i=I(n,"click",e[2]),o=!0)},p:D,d(r){r&&_(t),o=!1,i()}}}function zo(e){let t,n,o,i;return{c(){t=d("div"),n=d("button"),n.textContent="Find width",m(n,"class","svelte-18ruhw5")},m(r,l){v(r,t,l),h(t,n),o||(i=I(n,"click",e[1]),o=!0)},p:D,d(r){r&&_(t),o=!1,i()}}}function Yt(e){let t,n,o=e[3]+"",i,r,l=e[4]+"",c;return{c(){t=d("tr"),n=d("td"),i=C(o),r=d("td"),c=C(l),m(n,"class","svelte-18ruhw5"),m(r,"class","svelte-18ruhw5")},m(a,s){v(a,t,s),h(t,n),h(n,i),h(t,r),h(r,c)},p(a,s){s&1&&o!==(o=a[3]+"")&&J(i,o),s&1&&l!==(l=a[4]+"")&&J(c,l)},d(a){a&&_(t)}}}function No(e){let t,n=e[0]&&Xt(e);return{c(){t=d("div"),n&&n.c(),m(t,"slot","sidebar")},m(o,i){v(o,t,i),n&&n.m(t,null)},p(o,i){o[0]?n?n.p(o,i):(n=Xt(o),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},d(o){o&&_(t),n&&n.d()}}}function Po(e){let t,n;return t=new Ve({props:{$$slots:{sidebar:[No]},$$scope:{ctx:e}}}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},p(o,[i]){const r={};i&129&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Ao(e,t,n){let o;return L(e,Ye,l=>n(0,o=l)),[o,()=>V.set({mode:"find-width",road:o}),()=>V.set({mode:"intersection-geometry",intersection:o})]}class xo extends te{constructor(t){super(),ee(this,t,Ao,Po,q,{})}}function Jt(e){let t,n,o,i,r,l,c,a,s;return{c(){t=d("div"),n=d("button"),n.textContent="Graph mode",o=T(),i=d("div"),r=d("label"),l=d("input"),c=C(` Show calculated
          road widths`),m(l,"type","checkbox")},m(u,f){v(u,t,f),h(t,n),v(u,o,f),v(u,i,f),h(i,r),h(r,l),l.checked=e[3],h(r,c),a||(s=[I(n,"click",e[5]),I(l,"change",e[6])],a=!0)},p(u,f){f&8&&(l.checked=u[3])},d(u){u&&(_(t),_(o),_(i)),a=!1,ie(s)}}}function Io(e){let t,n,o,i,r,l;n=new eo({});let c=e[2].mode!="graph"&&Jt(e);return{c(){t=d("div"),X(n.$$.fragment),o=T(),c&&c.c(),i=T(),r=d("div"),m(t,"slot","left")},m(a,s){v(a,t,s),G(n,t,null),h(t,o),c&&c.m(t,null),h(t,i),h(t,r),e[7](r),l=!0},p(a,s){a[2].mode!="graph"?c?c.p(a,s):(c=Jt(a),c.c(),c.m(t,i)):c&&(c.d(1),c=null)},i(a){l||(N(n.$$.fragment,a),l=!0)},o(a){A(n.$$.fragment,a),l=!1},d(a){a&&_(t),U(n),c&&c.d(),e[7](null)}}}function Kt(e){let t,n;return t=new Hn({props:{gj:JSON.parse(e[1].render())}}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},p(o,i){const r={};i&2&&(r.gj=JSON.parse(o[1].render())),t.$set(r)},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Qt(e){let t,n,o=e[1]&&Kt(e);return{c(){o&&o.c(),t=R()},m(i,r){o&&o.m(i,r),v(i,t,r),n=!0},p(i,r){i[1]?o?(o.p(i,r),r&2&&N(o,1)):(o=Kt(i),o.c(),N(o,1),o.m(t.parentNode,t)):o&&(nt(),A(o,1,1,()=>{o=null}),ot())},i(i){n||(N(o),n=!0)},o(i){A(o),n=!1},d(i){i&&_(t),o&&o.d(i)}}}function Bo(e){let t,n=e[1],o,i=Qt(e);return{c(){t=d("div"),i.c(),m(t,"slot","main"),$e(t,"position","relative"),$e(t,"width","100%"),$e(t,"height","100vh")},m(r,l){v(r,t,l),i.m(t,null),o=!0},p(r,l){l&2&&q(n,n=r[1])?(nt(),A(i,1,1,D),ot(),i=Qt(r),i.c(),N(i,1),i.m(t,null)):i.p(r,l)},i(r){o||(N(i),o=!0)},o(r){A(i),o=!1},d(r){r&&_(t),i.d(r)}}}function Oo(e){let t,n;return t=new go({}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function To(e){let t,n;return t=new ko({}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Lo(e){let t,n;return t=new fo({}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Do(e){let t,n;return t=new xo({}),{c(){X(t.$$.fragment)},m(o,i){G(t,o,i),n=!0},i(o){n||(N(t.$$.fragment,o),n=!0)},o(o){A(t.$$.fragment,o),n=!1},d(o){U(t,o)}}}function Ro(e){let t,n,o,i,r,l;t=new Co({props:{$$slots:{main:[Bo],left:[Io]},$$scope:{ctx:e}}});const c=[Do,Lo,To,Oo],a=[];function s(u,f){return u[2].mode=="neutral"?0:u[2].mode=="find-width"?1:u[2].mode=="intersection-geometry"?2:u[2].mode=="graph"?3:-1}return~(o=s(e))&&(i=a[o]=c[o](e)),{c(){X(t.$$.fragment),n=T(),i&&i.c(),r=R()},m(u,f){G(t,u,f),v(u,n,f),~o&&a[o].m(u,f),v(u,r,f),l=!0},p(u,[f]){const b={};f&271&&(b.$$scope={dirty:f,ctx:u}),t.$set(b);let p=o;o=s(u),o!==p&&(i&&(nt(),A(a[p],1,1,()=>{a[p]=null}),ot()),~o?(i=a[o],i||(i=a[o]=c[o](u),i.c()),N(i,1),i.m(r.parentNode,r)):i=null)},i(u){l||(N(t.$$.fragment,u),N(i),l=!0)},o(u){A(t.$$.fragment,u),A(i),l=!1},d(u){u&&(_(n),_(r)),U(t,u),~o&&a[o].d(u)}}}function Wo(e,t,n){let o,i,r,l;L(e,Ke,f=>n(4,o=f)),L(e,fe,f=>n(1,i=f)),L(e,V,f=>n(2,r=f)),L(e,Je,f=>n(3,l=f));let c;const a=()=>Le(V,r={mode:"graph"},r);function s(){l=this.checked,Je.set(l)}function u(f){he[f?"unshift":"push"](()=>{c=f,n(0,c),n(4,o)})}return e.$$.update=()=>{e.$$.dirty&17&&c&&o&&(n(0,c.innerHTML="",c),c.appendChild(o))},[c,i,r,l,o,a,s,u]}class Vo extends te{constructor(t){super(),ee(this,t,Wo,Ro,q,{})}}new Vo({target:document.getElementById("app")});
