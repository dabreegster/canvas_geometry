var nn=Object.defineProperty;var on=(e,t,n)=>t in e?nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ve=(e,t,n)=>(on(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function T(){}function Ke(e,t){for(const n in t)e[n]=t[n];return e}function Ut(e){return e()}function at(){return Object.create(null)}function ae(e){e.forEach(Ut)}function Qe(e){return typeof e=="function"}function U(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function rn(e){return Object.keys(e).length===0}function sn(e,...t){if(e==null){for(const o of t)o(void 0);return T}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function I(e,t,n){e.$$.on_destroy.push(sn(t,n))}function xe(e,t,n,o){if(e){const i=Ft(e,t,n,o);return e[0](i)}}function Ft(e,t,n,o){return e[1]&&o?Ke(n.ctx.slice(),e[1](o(t))):n.ctx}function Ie(e,t,n,o){if(e[2]&&o){const i=e[2](o(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const r=[],s=Math.max(t.dirty.length,i.length);for(let c=0;c<s;c+=1)r[c]=t.dirty[c]|i[c];return r}return t.dirty|i}return t.dirty}function Be(e,t,n,o,i,r){if(i){const s=Ft(t,n,o,r);e.p(s,i)}}function Te(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let o=0;o<n;o++)t[o]=-1;return t}return-1}function Ue(e,t,n){return e.set(n),t}function ln(e){return e&&Qe(e.destroy)?e.destroy:T}function d(e,t){e.appendChild(t)}function k(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function ee(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function L(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Z(e){return document.createTextNode(e)}function D(){return Z(" ")}function W(){return Z("")}function B(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function b(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Le(e,t){for(const n in t)b(e,n,t[n])}function an(e){return Array.from(e.childNodes)}function se(e,t){t=""+t,e.data!==t&&(e.data=t)}function Gt(e,t){e.value=t??""}function Me(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function ct(e,t,n){for(let o=0;o<e.options.length;o+=1){const i=e.options[o];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function cn(e){const t=e.querySelector(":checked");return t&&t.__value}function j(e,t,n){e.classList.toggle(t,!!n)}let Ze;function Ee(e){Ze=e}function un(){if(!Ze)throw new Error("Function called outside component initialization");return Ze}function fn(e){un().$$.on_mount.push(e)}const _e=[],fe=[];let ge=[];const ut=[],hn=Promise.resolve();let Fe=!1;function pn(){Fe||(Fe=!0,hn.then(Ht))}function De(e){ge.push(e)}const qe=new Set;let de=0;function Ht(){if(de!==0)return;const e=Ze;do{try{for(;de<_e.length;){const t=_e[de];de++,Ee(t),dn(t.$$)}}catch(t){throw _e.length=0,de=0,t}for(Ee(null),_e.length=0,de=0;fe.length;)fe.pop()();for(let t=0;t<ge.length;t+=1){const n=ge[t];qe.has(n)||(qe.add(n),n())}ge.length=0}while(_e.length);for(;ut.length;)ut.pop()();Fe=!1,qe.clear(),Ee(e)}function dn(e){if(e.fragment!==null){e.update(),ae(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(De)}}function mn(e){const t=[],n=[];ge.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),ge=t}const Ne=new Set;let ue;function et(){ue={r:0,c:[],p:ue}}function tt(){ue.r||ae(ue.c),ue=ue.p}function z(e,t){e&&e.i&&(Ne.delete(e),e.i(t))}function P(e,t,n,o){if(e&&e.o){if(Ne.has(e))return;Ne.add(e),ue.c.push(()=>{Ne.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function A(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Xt(e,t){const n={},o={},i={$$scope:1};let r=e.length;for(;r--;){const s=e[r],c=t[r];if(c){for(const a in s)a in c||(o[a]=1);for(const a in c)i[a]||(n[a]=c[a],i[a]=1);e[r]=c}else for(const a in s)i[a]=1}for(const s in o)s in n||(n[s]=void 0);return n}function K(e){e&&e.c()}function H(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),De(()=>{const r=e.$$.on_mount.map(Ut).filter(Qe);e.$$.on_destroy?e.$$.on_destroy.push(...r):ae(r),e.$$.on_mount=[]}),i.forEach(De)}function X(e,t){const n=e.$$;n.fragment!==null&&(mn(n.after_update),ae(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function _n(e,t){e.$$.dirty[0]===-1&&(_e.push(e),pn(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ne(e,t,n,o,i,r,s=null,c=[-1]){const a=Ze;Ee(e);const l=e.$$={fragment:null,ctx:[],props:r,update:T,not_equal:i,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:at(),dirty:c,skip_bound:!1,root:t.target||a.$$.root};s&&s(l.root);let u=!1;if(l.ctx=n?n(e,t.props||{},(p,m,...f)=>{const _=f.length?f[0]:m;return l.ctx&&i(l.ctx[p],l.ctx[p]=_)&&(!l.skip_bound&&l.bound[p]&&l.bound[p](_),u&&_n(e,p)),m}):[],l.update(),u=!0,ae(l.before_update),l.fragment=o?o(l.ctx):!1,t.target){if(t.hydrate){const p=an(t.target);l.fragment&&l.fragment.l(p),p.forEach(w)}else l.fragment&&l.fragment.c();t.intro&&z(e.$$.fragment),H(e,t.target,t.anchor),Ht()}Ee(a)}class oe{constructor(){Ve(this,"$$");Ve(this,"$$set")}$destroy(){X(this,1),this.$destroy=T}$on(t,n){if(!Qe(n))return T;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const i=o.indexOf(n);i!==-1&&o.splice(i,1)}}$set(t){this.$$set&&!rn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const gn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(gn);var ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bn=function(){var e="",t,n,o,i=[],r={passive:!0};window.addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on"),o="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";function s(f,_){var h=function(y){!y&&(y=window.event);var M={originalEvent:y,target:y.target||y.srcElement,type:"wheel",deltaMode:y.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){y.preventDefault?y.preventDefault():y.returnValue=!1}};return o=="mousewheel"?(M.deltaY=-.025*y.wheelDelta,y.wheelDeltaX&&(M.deltaX=-.025*y.wheelDeltaX)):M.deltaY=y.detail,_(M)};return i.push({element:f,fn:h}),h}function c(f){for(var _=0;_<i.length;_++)if(i[_].element===f)return i[_].fn;return function(){}}function a(f){for(var _=0;_<i.length;_++)if(i[_].element===f)return i.splice(_,1)}function l(f,_,h,y){var M;o==="wheel"?M=h:M=s(f,h),f[t](e+_,M,y?r:!1)}function u(f,_,h,y){var M;o==="wheel"?M=h:M=c(f),f[n](e+_,M,y?r:!1),a(f)}function p(f,_,h){l(f,o,_,h),o=="DOMMouseScroll"&&l(f,"MozMousePixelScroll",_,h)}function m(f,_,h){u(f,o,_,h),o=="DOMMouseScroll"&&u(f,"MozMousePixelScroll",_,h)}return{on:p,off:m}}(),nt={extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,o=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&o<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var o=this,i,r,s,c=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:o.now(),c=null,s=e.apply(i,r),c||(i=r=null)};return function(){var u=o.now();!a&&n.leading===!1&&(a=u);var p=t-(u-a);return i=this,r=arguments,p<=0||p>t?(clearTimeout(c),c=null,a=u,s=e.apply(i,r),c||(i=r=null)):!c&&n.trailing!==!1&&(c=setTimeout(l,p)),s}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||ht(33):ht(t)}};function ht(e){return function(t){window.setTimeout(t,e)}}var je=nt,Yt="unknown";document.documentMode&&(Yt="ie");var ot={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(je.isElement(t)?n=t:n=e.querySelector(t),!n){var o=Array.prototype.slice.call(e.childNodes||e.children).filter(function(a){return a.nodeName!=="defs"&&a.nodeName!=="#text"});o.length===1&&o[0].nodeName==="g"&&o[0].getAttribute("transform")===null&&(n=o[0])}if(!n){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",i);var r=e.childNodes||e.children;if(r&&r.length>0)for(var s=r.length;s>0;s--)r[r.length-s].nodeName!=="defs"&&n.appendChild(r[r.length-s]);e.appendChild(n)}var c=[];return n.getAttribute("class")&&(c=n.getAttribute("class").split(" ")),~c.indexOf("svg-pan-zoom_viewport")||(c.push("svg-pan-zoom_viewport"),n.setAttribute("class",c.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:je.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var o=e[n];o.parentNode.insertBefore(o,o)}},ft?ft.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var o=this,i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",i),"transform"in e.style?e.style.transform=i:"-ms-transform"in e.style?e.style["-ms-transform"]=i:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=i),Yt==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){o.refreshDefsGlobal()},o.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return je.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var o=e.createSVGPoint();return o.x=t,o.y=n,o}},R=ot,wn={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(R.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var o=document.createElementNS(R.svgNS,"style");o.setAttribute("id","svg-pan-zoom-controls-styles"),o.setAttribute("type","text/css"),o.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(o)}var i=document.createElementNS(R.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(R.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(R.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(R.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},_createZoomReset:function(e){var t=document.createElementNS(R.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(R.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(R.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o);var i=document.createElementNS(R.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(i),t},_createZoomOut:function(e){var t=document.createElementNS(R.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(R.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(R.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},yn=ot,le=nt,N=function(e,t){this.init(e,t)};N.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=le.proxy(this.updateCTM,this),this.requestAnimationFrame=le.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()};N.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(o){return o}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()};N.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height};N.prototype.getViewBox=function(){return le.extend({},this.viewBox)};N.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,o=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=o}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e};N.prototype.getOriginalState=function(){return le.extend({},this.originalState)};N.prototype.getState=function(){return le.extend({},this.activeState)};N.prototype.getZoom=function(){return this.activeState.zoom};N.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom};N.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom};N.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}};N.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e};N.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var o=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),i=!1,r=!1;o===!1?(e.e=this.getPan().x,e.f=this.getPan().y,i=r=!0):le.isObject(o)&&(o.x===!1?(e.e=this.getPan().x,i=!0):le.isNumber(o.x)&&(e.e=o.x),o.y===!1?(e.f=this.getPan().y,r=!0):le.isNumber(o.y)&&(e.f=o.y)),i&&r||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}};N.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a};N.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f};N.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f};N.prototype.pendingUpdate=!1;N.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))};N.prototype.updateCTM=function(){var e=this.getCTM();yn.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var kn=function(e,t){return new N(e,t)},Jt=bn,Ge=wn,G=nt,J=ot,Sn=kn,E=function(e,t){this.init(e,t)},Mn={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},Kt={passive:!0};E.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),J.setupSvgAttributes(this.svg),this.options=G.extend(G.extend({},Mn),t),this.state="none";var o=J.getBoundingClientRectNormalized(e);this.width=o.width,this.height=o.height,this.viewport=Sn(J.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(r,s){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(r,s)},onZoom:function(r){if(n.viewport&&n.options.onZoom)return n.options.onZoom(r)},beforePan:function(r,s){if(n.viewport&&n.options.beforePan)return n.options.beforePan(r,s)},onPan:function(r){if(n.viewport&&n.options.onPan)return n.options.onPan(r)},onUpdatedCTM:function(r){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(r)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&Ge.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()};E.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={mousedown:function(r){var s=e.handleMouseDown(r,t);return t=r,s},touchstart:function(r){var s=e.handleMouseDown(r,t);return t=r,s},mouseup:function(r){return e.handleMouseUp(r)},touchend:function(r){return e.handleMouseUp(r)},mousemove:function(r){return e.handleMouseMove(r)},touchmove:function(r){return e.handleMouseMove(r)},mouseleave:function(r){return e.handleMouseUp(r)},touchleave:function(r){return e.handleMouseUp(r)},touchcancel:function(r){return e.handleMouseUp(r)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var o=n.length-1;o>=0;o--)this.eventListeners.hasOwnProperty(n[o])&&delete this.eventListeners[n[o]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?!1:Kt);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())};E.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;Jt.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}};E.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Jt.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}};E.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,o=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/o;var i=this.svg.getScreenCTM().inverse(),r=J.getEventPoint(e,this.svg).matrixTransform(i),s=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(s,r)}};E.prototype.zoomAtPoint=function(e,t,n){var o=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*o.zoom,Math.min(this.options.maxZoom*o.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*o.zoom?e=this.options.minZoom*o.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*o.zoom&&(e=this.options.maxZoom*o.zoom/this.getZoom());var i=this.viewport.getCTM(),r=t.matrixTransform(i.inverse()),s=this.svg.createSVGMatrix().translate(r.x,r.y).scale(e).translate(-r.x,-r.y),c=i.multiply(s);c.a!==i.a&&this.viewport.setCTM(c)};E.prototype.zoom=function(e,t){this.zoomAtPoint(e,J.getSvgCenterPoint(this.svg,this.width,this.height),t)};E.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)};E.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),G.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=J.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)};E.prototype.getZoom=function(){return this.viewport.getZoom()};E.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()};E.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom};E.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)};E.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())};E.prototype.reset=function(){this.resetZoom(),this.resetPan()};E.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var o=J.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,o)};E.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),G.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&G.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=J.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))};E.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=J.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}};E.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")};E.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)};E.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)};E.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})};E.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()};E.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)};E.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)};E.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}};E.prototype.resize=function(){var e=J.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())};E.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?!1:Kt);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),re=re.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}};E.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:G.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:G.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,Ge.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,Ge.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:G.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:G.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:G.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var re=[],En=function(e,t){var n=G.getSvg(e);if(n===null)return null;for(var o=re.length-1;o>=0;o--)if(re[o].svg===n)return re[o].instance.getPublicInstance();return re.push({svg:n,instance:new E(n,t)}),re[re.length-1].instance.getPublicInstance()},Cn=En;const $n=vn(Cn);function Qt(e){return e.map(t=>`${t[0]},${t[1]}`).join(" ")}function te(e){return e.exterior.map(t=>`${t.x},${t.y}`).join(" ")}function Oe(e){return{x1:e.start.x,y1:e.start.y,x2:e.end.x,y2:e.end.y}}let $;const en=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&en.decode();let ye=null;function Ce(){return(ye===null||ye.byteLength===0)&&(ye=new Uint8Array($.memory.buffer)),ye}function ve(e,t){return e=e>>>0,en.decode(Ce().subarray(e,e+t))}const Q=new Array(128).fill(void 0);Q.push(void 0,null,!0,!1);let $e=Q.length;function pt(e){$e===Q.length&&Q.push(Q.length+1);const t=$e;return $e=Q[t],Q[t]=e,t}function ce(e){return Q[e]}function Zn(e){e<132||(Q[e]=$e,$e=e)}function ke(e){const t=ce(e);return Zn(e),t}let ze=0;function zn(e,t){const n=t(e.length*1,1)>>>0;return Ce().set(e,n/1),ze=e.length,n}let Se=null;function x(){return(Se===null||Se.byteLength===0)&&(Se=new Int32Array($.memory.buffer)),Se}const Ae=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Pn=typeof Ae.encodeInto=="function"?function(e,t){return Ae.encodeInto(e,t)}:function(e,t){const n=Ae.encode(e);return t.set(n),{read:e.length,written:n.length}};function Nn(e,t,n){if(n===void 0){const c=Ae.encode(e),a=t(c.length,1)>>>0;return Ce().subarray(a,a+c.length).set(c),ze=c.length,a}let o=e.length,i=t(o,1)>>>0;const r=Ce();let s=0;for(;s<o;s++){const c=e.charCodeAt(s);if(c>127)break;r[i+s]=c}if(s!==o){s!==0&&(e=e.slice(s)),i=n(i,o,o=s+e.length*3,1)>>>0;const c=Ce().subarray(i+s,i+o),a=Pn(e,c);s+=a.written}return ze=s,i}class dt{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,t}free(){const t=this.__destroy_into_raw();$.__wbg_mapmodel_free(t)}constructor(t){try{const r=$.__wbindgen_add_to_stack_pointer(-16),s=zn(t,$.__wbindgen_malloc),c=ze;$.mapmodel_new(r,s,c);var n=x()[r/4+0],o=x()[r/4+1],i=x()[r/4+2];if(i)throw ke(o);return this.__wbg_ptr=n>>>0,this}finally{$.__wbindgen_add_to_stack_pointer(16)}}render(){let t,n;try{const l=$.__wbindgen_add_to_stack_pointer(-16);$.mapmodel_render(l,this.__wbg_ptr);var o=x()[l/4+0],i=x()[l/4+1],r=x()[l/4+2],s=x()[l/4+3],c=o,a=i;if(s)throw c=0,a=0,ke(r);return t=c,n=a,ve(c,a)}finally{$.__wbindgen_add_to_stack_pointer(16),$.__wbindgen_free(t,n,1)}}findRoadWidth(t){let n,o;try{const u=$.__wbindgen_add_to_stack_pointer(-16);$.mapmodel_findRoadWidth(u,this.__wbg_ptr,t);var i=x()[u/4+0],r=x()[u/4+1],s=x()[u/4+2],c=x()[u/4+3],a=i,l=r;if(c)throw a=0,l=0,ke(s);return n=a,o=l,ve(a,l)}finally{$.__wbindgen_add_to_stack_pointer(16),$.__wbindgen_free(n,o,1)}}findIntersectionGeometry(t){let n,o;try{const u=$.__wbindgen_add_to_stack_pointer(-16);$.mapmodel_findIntersectionGeometry(u,this.__wbg_ptr,t);var i=x()[u/4+0],r=x()[u/4+1],s=x()[u/4+2],c=x()[u/4+3],a=i,l=r;if(c)throw a=0,l=0,ke(s);return n=a,o=l,ve(a,l)}finally{$.__wbindgen_add_to_stack_pointer(16),$.__wbindgen_free(n,o,1)}}}async function An(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(o){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o);else throw o}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function xn(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(t,n){const o=ve(t,n);return pt(o)},e.wbg.__wbindgen_object_drop_ref=function(t){ke(t)},e.wbg.__wbg_debug_34c9290896ec9856=function(t){console.debug(ce(t))},e.wbg.__wbg_error_e60eff06f24ab7a4=function(t){console.error(ce(t))},e.wbg.__wbg_info_d7d58472d0bab115=function(t){console.info(ce(t))},e.wbg.__wbg_log_a4530b4fe289336f=function(t){console.log(ce(t))},e.wbg.__wbg_warn_f260f49434e45e62=function(t){console.warn(ce(t))},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const t=new Error;return pt(t)},e.wbg.__wbg_stack_658279fe44541cf6=function(t,n){const o=ce(n).stack,i=Nn(o,$.__wbindgen_malloc,$.__wbindgen_realloc),r=ze;x()[t/4+1]=r,x()[t/4+0]=i},e.wbg.__wbg_error_f851667af71bcfc6=function(t,n){let o,i;try{o=t,i=n,console.error(ve(t,n))}finally{$.__wbindgen_free(o,i,1)}},e.wbg.__wbindgen_throw=function(t,n){throw new Error(ve(t,n))},e}function In(e,t){return $=e.exports,tn.__wbindgen_wasm_module=t,Se=null,ye=null,$}async function tn(e){if($!==void 0)return $;typeof e>"u"&&(e="/canvas_geometry/assets/backend_bg.wasm");const t=xn();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:o}=await An(await e,t);return In(n,o)}const me=[];function we(e,t=T){let n;const o=new Set;function i(c){if(U(e,c)&&(e=c,n)){const a=!me.length;for(const l of o)l[1](),me.push(l,e);if(a){for(let l=0;l<me.length;l+=2)me[l][0](me[l+1]);me.length=0}}}function r(c){i(c(e))}function s(c,a=T){const l=[c,a];return o.add(l),o.size===1&&(n=t(i,r)||T),c(e),()=>{o.delete(l),o.size===0&&n&&(n(),n=null)}}return{set:i,update:r,subscribe:s}}let be=we(null),q=we({mode:"neutral"}),He=we(null),Xe=we(!1),Ye=we(null),Je=we(null);function mt(e,t,n){const o=e.slice();return o[19]=t[n],o}function _t(e,t,n){const o=e.slice();return o[19]=t[n],o}function gt(e,t,n){const o=e.slice();return o[19]=t[n],o}function Bn(e){let t,n,o;function i(){return e[12](e[19])}return{c(){t=L("polyline"),b(t,"points",Qt(e[19].geometry.coordinates)),b(t,"class","svelte-1gy75sc"),j(t,"clicked",e[1]==e[19])},m(r,s){k(r,t,s),n||(o=B(t,"click",i),n=!0)},p(r,s){e=r,s&18&&j(t,"clicked",e[1]==e[19])},d(r){r&&w(t),n=!1,o()}}}function Tn(e){let t,n,o;function i(){return e[11](e[19])}return{c(){t=L("polygon"),b(t,"points",te(JSON.parse(e[19].properties.polygon))),b(t,"class","road-outline svelte-1gy75sc"),j(t,"clicked",e[1]==e[19])},m(r,s){k(r,t,s),n||(o=B(t,"click",i),n=!0)},p(r,s){e=r,s&18&&j(t,"clicked",e[1]==e[19])},d(r){r&&w(t),n=!1,o()}}}function vt(e){let t;function n(r,s){return r[3]&&r[19].properties.polygon?Tn:Bn}let o=n(e),i=o(e);return{c(){i.c(),t=W()},m(r,s){i.m(r,s),k(r,t,s)},p(r,s){o===(o=n(r))&&i?i.p(r,s):(i.d(1),i=o(r),i&&(i.c(),i.m(t.parentNode,t)))},d(r){r&&w(t),i.d(r)}}}function bt(e){let t,n,o;function i(){return e[13](e[19])}return{c(){t=L("circle"),b(t,"cx",e[19].geometry.coordinates[0]),b(t,"cy",e[19].geometry.coordinates[1]),b(t,"r","1"),b(t,"class","svelte-1gy75sc"),j(t,"clicked",e[1]==e[19])},m(r,s){k(r,t,s),n||(o=B(t,"click",i),n=!0)},p(r,s){e=r,s&34&&j(t,"clicked",e[1]==e[19])},d(r){r&&w(t),n=!1,o()}}}function wt(e){let t,n,o;function i(){return e[14](e[19])}return{c(){t=L("polygon"),b(t,"points",Qt(e[19].geometry.coordinates[0])),b(t,"class","svelte-1gy75sc"),j(t,"clicked",e[1]==e[19])},m(r,s){k(r,t,s),n||(o=B(t,"click",i),n=!0)},p(r,s){e=r,s&66&&j(t,"clicked",e[1]==e[19])},d(r){r&&w(t),n=!1,o()}}}function yt(e){let t,n,o,i,r,s,c=A(e[4]),a=[];for(let f=0;f<c.length;f+=1)a[f]=vt(gt(e,c,f));let l=A(e[5]),u=[];for(let f=0;f<l.length;f+=1)u[f]=bt(_t(e,l,f));let p=A(e[6]),m=[];for(let f=0;f<p.length;f+=1)m[f]=wt(mt(e,p,f));return{c(){t=L("svg");for(let f=0;f<a.length;f+=1)a[f].c();n=W();for(let f=0;f<u.length;f+=1)u[f].c();o=W();for(let f=0;f<m.length;f+=1)m[f].c();i=L("g"),b(t,"class","svelte-1gy75sc")},m(f,_){k(f,t,_);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(t,null);d(t,n);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(t,null);d(t,o);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(t,null);d(t,i),e[15](i),r||(s=[ln(e[7].call(null,t)),B(t,"click",e[16])],r=!0)},p(f,_){if(_&282){c=A(f[4]);let h;for(h=0;h<c.length;h+=1){const y=gt(f,c,h);a[h]?a[h].p(y,_):(a[h]=vt(y),a[h].c(),a[h].m(t,n))}for(;h<a.length;h+=1)a[h].d(1);a.length=c.length}if(_&290){l=A(f[5]);let h;for(h=0;h<l.length;h+=1){const y=_t(f,l,h);u[h]?u[h].p(y,_):(u[h]=bt(y),u[h].c(),u[h].m(t,o))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}if(_&322){p=A(f[6]);let h;for(h=0;h<p.length;h+=1){const y=mt(f,p,h);m[h]?m[h].p(y,_):(m[h]=wt(y),m[h].c(),m[h].m(t,i))}for(;h<m.length;h+=1)m[h].d(1);m.length=p.length}},d(f){f&&w(t),ee(a,f),ee(u,f),ee(m,f),e[15](null),r=!1,ae(s)}}}function Ln(e){let t=e[2],n,o=yt(e);return{c(){o.c(),n=W()},m(i,r){o.m(i,r),k(i,n,r)},p(i,[r]){r&4&&U(t,t=i[2])?(o.d(1),o=yt(i),o.c(),o.m(n.parentNode,n)):o.p(i,r)},i:T,o:T,d(i){i&&w(n),o.d(i)}}}function Dn(e,t,n){let o,i,r,s;I(e,Je,v=>n(10,o=v)),I(e,He,v=>n(1,i=v)),I(e,q,v=>n(2,r=v)),I(e,Xe,v=>n(3,s=v));let{gj:c}=t,a=c.features.filter(v=>v.geometry.type=="LineString"),l=c.features.filter(v=>v.geometry.type=="Point"),u=c.features.filter(v=>v.geometry.type=="Polygon"),p=null,m=null;function f(v){let F=$n(v,{minZoom:.1,maxZoom:50,zoomScaleSensitivity:.5});return p&&(F.zoom(p),F.pan(m)),{update(){},destroy(){p=F.getZoom(),m=F.getPan()}}}function _(v){Ue(He,i=v,i),i==null?q.set({mode:"neutral"}):i.geometry.type=="LineString"?q.set({mode:"find-width",road:i}):i.geometry.type=="Point"?q.set({mode:"intersection-geometry",intersection:i}):i.geometry.type=="Polygon"&&q.set({mode:"neutral"})}let h;const y=v=>_(v),M=v=>_(v),C=v=>_(v),S=v=>_(v);function O(v){fe[v?"unshift":"push"](()=>{h=v,n(0,h),n(10,o)})}const V=()=>_(null);return e.$$set=v=>{"gj"in v&&n(9,c=v.gj)},e.$$.update=()=>{e.$$.dirty&1025&&h&&o&&(n(0,h.innerHTML="",h),h.appendChild(o))},[h,i,r,s,a,l,u,f,_,c,o,y,M,C,S,O,V]}class On extends oe{constructor(t){super(),ne(this,t,Dn,Ln,U,{gj:9})}}function kt(e){let t;return{c(){t=g("div"),t.textContent="Loading",b(t,"class","svelte-1uuov7f")},m(n,o){k(n,t,o)},d(n){n&&w(t)}}}function Rn(e){let t,n=e[0]&&kt();return{c(){n&&n.c(),t=W()},m(o,i){n&&n.m(o,i),k(o,t,i)},p(o,[i]){o[0]?n||(n=kt(),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:T,o:T,d(o){o&&w(t),n&&n.d(o)}}}function Wn(e,t,n){let{loading:o=!1}=t;return e.$$set=i=>{"loading"in i&&n(0,o=i.loading)},[o]}class Vn extends oe{constructor(t){super(),ne(this,t,Wn,Rn,U,{loading:0})}}function St(e,t,n){const o=e.slice();return o[2]=t[n],o}function Mt(e){let t,n=e[2]+"",o;return{c(){t=g("option"),o=Z(n),t.__value=e[2],Gt(t,t.__value)},m(i,r){k(i,t,r),d(t,o)},p:T,d(i){i&&w(t)}}}function qn(e){let t,n,o,i,r,s,c,a,l,u,p,m,f,_,h,y;t=new Vn({props:{loading:e[0]}});let M=A(e[5]),C=[];for(let S=0;S<M.length;S+=1)C[S]=Mt(St(e,M,S));return{c(){K(t.$$.fragment),n=D(),o=g("div"),i=g("div"),r=g("label"),s=Z(`Load an osm.xml or a .pbf file:
      `),c=g("input"),a=D(),l=g("div"),u=g("label"),p=Z(`Or load an example:
      `),m=g("select"),f=g("option"),f.textContent="Custom file loaded";for(let S=0;S<C.length;S+=1)C[S].c();b(c,"type","file"),f.__value="",Gt(f,f.__value),e[2]===void 0&&De(()=>e[7].call(m)),Me(o,"border","1px solid black"),Me(o,"padding","8px")},m(S,O){H(t,S,O),k(S,n,O),k(S,o,O),d(o,i),d(i,r),d(r,s),d(r,c),e[6](c),d(o,a),d(o,l),d(l,u),d(u,p),d(u,m),d(m,f);for(let V=0;V<C.length;V+=1)C[V]&&C[V].m(m,null);ct(m,e[2],!0),_=!0,h||(y=[B(c,"change",e[4]),B(m,"change",e[7]),B(m,"change",e[3])],h=!0)},p(S,[O]){const V={};if(O&1&&(V.loading=S[0]),t.$set(V),O&32){M=A(S[5]);let v;for(v=0;v<M.length;v+=1){const F=St(S,M,v);C[v]?C[v].p(F,O):(C[v]=Mt(F),C[v].c(),C[v].m(m,null))}for(;v<C.length;v+=1)C[v].d(1);C.length=M.length}O&36&&ct(m,S[2])},i(S){_||(z(t.$$.fragment,S),_=!0)},o(S){P(t.$$.fragment,S),_=!1},d(S){S&&(w(n),w(o)),X(t,S),e[6](null),ee(C,S),h=!1,ae(y)}}}function jn(e,t,n){let o;I(e,be,m=>n(8,o=m));let i="borough_sausage_links",r=!1;fn(async()=>{await tn();try{let m=await fetch(`/${i}/input.osm`,{method:"HEAD"});s()}catch{}});async function s(){let m=`/${i}/input.osm`;try{n(0,r=!0);let _=await(await fetch(m)).arrayBuffer();Ue(be,o=new dt(new Uint8Array(_)),o),console.log(`Loaded ${i}`)}catch(f){window.alert(`Couldn't open from URL ${m}: ${f}`)}n(0,r=!1)}let c;async function a(m){try{n(0,r=!0);let f=await c.files[0].arrayBuffer();Ue(be,o=new dt(new Uint8Array(f)),o),n(2,i="")}catch(f){window.alert(`Couldn't open this file: ${f}`)}n(0,r=!1)}let l=["arizona_highways","aurora_sausage_link","borough_sausage_links","bristol_contraflow_cycleway","bristol_sausage_links","cycleway_rejoin_road","degenerate_bug","frederiksted","fremantle_placement","i5_exit_ramp","kingsway_junction","leeds_cycleway","montlake_roundabout","northgate_dual_carriageway","oneway_loop","overlapping_service_roads","perth_peanut_roundabout","perth_stretched_lights","quad_intersection","roosevelt_cycletrack","seattle_slip_lane","seattle_triangle","service_road_loop","st_georges_cycletrack","taipei","tempe_light_rail","tempe_split","tiny_loop","tiny_roundabout"];function u(m){fe[m?"unshift":"push"](()=>{c=m,n(1,c)})}function p(){i=cn(this),n(2,i),n(5,l)}return[r,c,i,s,a,l,u,p]}class Un extends oe{constructor(t){super(),ne(this,t,jn,qn,U,{})}}const Fn=e=>({}),Et=e=>({}),Gn=e=>({}),Ct=e=>({});function Hn(e){let t,n,o,i;const r=e[3].sidebar,s=xe(r,e,e[2],Ct),c=e[3].map,a=xe(c,e,e[2],Et);return{c(){t=g("div"),s&&s.c(),n=D(),o=L("g"),a&&a.c()},m(l,u){k(l,t,u),s&&s.m(t,null),e[4](t),k(l,n,u),k(l,o,u),a&&a.m(o,null),e[5](o),i=!0},p(l,[u]){s&&s.p&&(!i||u&4)&&Be(s,r,l,l[2],i?Ie(r,l[2],u,Gn):Te(l[2]),Ct),a&&a.p&&(!i||u&4)&&Be(a,c,l,l[2],i?Ie(c,l[2],u,Fn):Te(l[2]),Et)},i(l){i||(z(s,l),z(a,l),i=!0)},o(l){P(s,l),P(a,l),i=!1},d(l){l&&(w(t),w(n),w(o)),s&&s.d(l),e[4](null),a&&a.d(l),e[5](null)}}}function Xn(e,t,n){let o,i;I(e,Ye,l=>n(0,o=l)),I(e,Je,l=>n(1,i=l));let{$$slots:r={},$$scope:s}=t;function c(l){fe[l?"unshift":"push"](()=>{o=l,Ye.set(o)})}function a(l){fe[l?"unshift":"push"](()=>{i=l,Je.set(i)})}return e.$$set=l=>{"$$scope"in l&&n(2,s=l.$$scope)},[o,i,s,r,c,a]}class it extends oe{constructor(t){super(),ne(this,t,Xn,Hn,U,{})}}function $t(e,t,n){const o=e.slice();o[4]=t[n];const i=o[4].left?"left":"right";return o[5]=i,o}function Yn(e){let t,n,o,i,r,s=e[0].max_left_width.toFixed(2)+"",c,a,l,u,p=e[0].max_right_width.toFixed(2)+"",m,f,_,h,y,M;return{c(){t=g("div"),n=g("p"),n.textContent="Finding width of this road...",o=D(),i=g("p"),r=Z("Max left: "),c=Z(s),a=D(),l=g("p"),u=Z("Max right: "),m=Z(p),f=D(),_=g("div"),h=g("button"),h.textContent="Back",b(t,"slot","sidebar")},m(C,S){k(C,t,S),d(t,n),d(t,o),d(t,i),d(i,r),d(i,c),d(t,a),d(t,l),d(l,u),d(l,m),d(t,f),d(t,_),d(_,h),y||(M=B(h,"click",e[3]),y=!0)},p(C,S){S&1&&s!==(s=C[0].max_left_width.toFixed(2)+"")&&se(c,s),S&1&&p!==(p=C[0].max_right_width.toFixed(2)+"")&&se(m,p)},d(C){C&&w(t),y=!1,M()}}}function Jn(e){let t,n,o=[{class:n=e[5]},Oe(e[4].full_line)],i={};for(let r=0;r<o.length;r+=1)i=Ke(i,o[r]);return{c(){t=L("line"),Le(t,i),j(t,"svelte-1okfffm",!0)},m(r,s){k(r,t,s)},p(r,s){Le(t,i=Xt(o,[s&1&&n!==(n=r[5])&&{class:n},s&1&&Oe(r[4].full_line)])),j(t,"svelte-1okfffm",!0)},d(r){r&&w(t)}}}function Kn(e){let t,n,o,i=e[4].hit[1].toFixed(2)+"",r,s,c=[{class:s=`${e[5]} hits`},Oe(e[4].hit[0])],a={};for(let l=0;l<c.length;l+=1)a=Ke(a,c[l]);return{c(){t=L("line"),n=L("title"),o=Z("Length: "),r=Z(i),Le(t,a),j(t,"svelte-1okfffm",!0)},m(l,u){k(l,t,u),d(t,n),d(n,o),d(n,r)},p(l,u){u&1&&i!==(i=l[4].hit[1].toFixed(2)+"")&&se(r,i),Le(t,a=Xt(c,[u&1&&s!==(s=`${l[5]} hits`)&&{class:s},u&1&&Oe(l[4].hit[0])])),j(t,"svelte-1okfffm",!0)},d(l){l&&w(t)}}}function Zt(e){let t;function n(r,s){return r[4].hit?Kn:Jn}let o=n(e),i=o(e);return{c(){i.c(),t=W()},m(r,s){i.m(r,s),k(r,t,s)},p(r,s){o===(o=n(r))&&i?i.p(r,s):(i.d(1),i=o(r),i&&(i.c(),i.m(t.parentNode,t)))},d(r){r&&w(t),i.d(r)}}}function Qn(e){let t,n,o,i=A(e[0].test_lines),r=[];for(let s=0;s<i.length;s+=1)r[s]=Zt($t(e,i,s));return{c(){t=L("g");for(let s=0;s<r.length;s+=1)r[s].c();n=L("polygon"),b(n,"points",o=te(e[0].buffered_polygon)),b(n,"class","svelte-1okfffm"),b(t,"slot","map")},m(s,c){k(s,t,c);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null);d(t,n)},p(s,c){if(c&1){i=A(s[0].test_lines);let a;for(a=0;a<i.length;a+=1){const l=$t(s,i,a);r[a]?r[a].p(l,c):(r[a]=Zt(l),r[a].c(),r[a].m(t,n))}for(;a<r.length;a+=1)r[a].d(1);r.length=i.length}c&1&&o!==(o=te(s[0].buffered_polygon))&&b(n,"points",o)},d(s){s&&w(t),ee(r,s)}}}function eo(e){let t,n;return t=new it({props:{$$slots:{map:[Qn],sidebar:[Yn]},$$scope:{ctx:e}}}),{c(){K(t.$$.fragment)},m(o,i){H(t,o,i),n=!0},p(o,[i]){const r={};i&257&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){X(t,o)}}}function to(e,t,n){let o,i,r;I(e,q,c=>n(1,i=c)),I(e,be,c=>n(2,r=c));const s=()=>q.set({mode:"neutral"});return e.$$.update=()=>{e.$$.dirty&6&&n(0,o=JSON.parse(r.findRoadWidth(i.road.properties.id)))},[o,i,r,s]}class no extends oe{constructor(t){super(),ne(this,t,to,eo,U,{})}}function zt(e,t,n){const o=e.slice();return o[10]=t[n],o}function Pt(e,t,n){const o=e.slice();return o[10]=t[n],o}function Nt(e,t,n){const o=e.slice();return o[10]=t[n],o}function oo(e){let t,n,o,i,r,s,c,a,l,u,p=e[3].thick_roads.length+"",m,f,_,h,y,M,C,S=e[3].overlaps.flat().length+"",O,V,v,F,he,pe,rt,Pe=e[3].unioned.flat().length+"",Re,st,We,lt;return{c(){t=g("div"),n=g("p"),n.textContent="Intersection geometry",o=D(),i=g("div"),r=g("button"),r.textContent="Back",s=D(),c=g("div"),a=g("label"),l=g("input"),u=Z(`Show thick roads
        (`),m=Z(p),f=Z(")"),_=D(),h=g("div"),y=g("label"),M=g("input"),C=Z("Show overlaps ("),O=Z(S),V=Z(")"),v=D(),F=g("div"),he=g("label"),pe=g("input"),rt=Z("Show unioned ("),Re=Z(Pe),st=Z(")"),b(l,"type","checkbox"),b(M,"type","checkbox"),b(pe,"type","checkbox"),b(t,"slot","sidebar")},m(Y,ie){k(Y,t,ie),d(t,n),d(t,o),d(t,i),d(i,r),d(t,s),d(t,c),d(c,a),d(a,l),l.checked=e[0],d(a,u),d(a,m),d(a,f),d(t,_),d(t,h),d(h,y),d(y,M),M.checked=e[1],d(y,C),d(y,O),d(y,V),d(t,v),d(t,F),d(F,he),d(he,pe),pe.checked=e[2],d(he,rt),d(he,Re),d(he,st),We||(lt=[B(r,"click",e[6]),B(l,"change",e[7]),B(M,"change",e[8]),B(pe,"change",e[9])],We=!0)},p(Y,ie){ie&1&&(l.checked=Y[0]),ie&8&&p!==(p=Y[3].thick_roads.length+"")&&se(m,p),ie&2&&(M.checked=Y[1]),ie&8&&S!==(S=Y[3].overlaps.flat().length+"")&&se(O,S),ie&4&&(pe.checked=Y[2]),ie&8&&Pe!==(Pe=Y[3].unioned.flat().length+"")&&se(Re,Pe)},d(Y){Y&&w(t),We=!1,ae(lt)}}}function At(e){let t,n=A(e[3].thick_roads),o=[];for(let i=0;i<n.length;i+=1)o[i]=xt(Nt(e,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=W()},m(i,r){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,r);k(i,t,r)},p(i,r){if(r&8){n=A(i[3].thick_roads);let s;for(s=0;s<n.length;s+=1){const c=Nt(i,n,s);o[s]?o[s].p(c,r):(o[s]=xt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(i){i&&w(t),ee(o,i)}}}function xt(e){let t,n;return{c(){t=L("polygon"),b(t,"points",n=te(e[10])),b(t,"class","thick svelte-1n6m21w")},m(o,i){k(o,t,i)},p(o,i){i&8&&n!==(n=te(o[10]))&&b(t,"points",n)},d(o){o&&w(t)}}}function It(e){let t,n=A(e[3].overlaps.flat()),o=[];for(let i=0;i<n.length;i+=1)o[i]=Bt(Pt(e,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=W()},m(i,r){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,r);k(i,t,r)},p(i,r){if(r&8){n=A(i[3].overlaps.flat());let s;for(s=0;s<n.length;s+=1){const c=Pt(i,n,s);o[s]?o[s].p(c,r):(o[s]=Bt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(i){i&&w(t),ee(o,i)}}}function Bt(e){let t,n;return{c(){t=L("polygon"),b(t,"points",n=te(e[10])),b(t,"class","overlaps svelte-1n6m21w")},m(o,i){k(o,t,i)},p(o,i){i&8&&n!==(n=te(o[10]))&&b(t,"points",n)},d(o){o&&w(t)}}}function Tt(e){let t,n=A(e[3].unioned.flat()),o=[];for(let i=0;i<n.length;i+=1)o[i]=Lt(zt(e,n,i));return{c(){for(let i=0;i<o.length;i+=1)o[i].c();t=W()},m(i,r){for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(i,r);k(i,t,r)},p(i,r){if(r&8){n=A(i[3].unioned.flat());let s;for(s=0;s<n.length;s+=1){const c=zt(i,n,s);o[s]?o[s].p(c,r):(o[s]=Lt(c),o[s].c(),o[s].m(t.parentNode,t))}for(;s<o.length;s+=1)o[s].d(1);o.length=n.length}},d(i){i&&w(t),ee(o,i)}}}function Lt(e){let t,n;return{c(){t=L("polygon"),b(t,"points",n=te(e[10])),b(t,"class","unioned svelte-1n6m21w")},m(o,i){k(o,t,i)},p(o,i){i&8&&n!==(n=te(o[10]))&&b(t,"points",n)},d(o){o&&w(t)}}}function io(e){let t,n,o,i=e[0]&&At(e),r=e[1]&&It(e),s=e[2]&&Tt(e);return{c(){t=L("g"),i&&i.c(),n=W(),r&&r.c(),o=W(),s&&s.c(),b(t,"slot","map")},m(c,a){k(c,t,a),i&&i.m(t,null),d(t,n),r&&r.m(t,null),d(t,o),s&&s.m(t,null)},p(c,a){c[0]?i?i.p(c,a):(i=At(c),i.c(),i.m(t,n)):i&&(i.d(1),i=null),c[1]?r?r.p(c,a):(r=It(c),r.c(),r.m(t,o)):r&&(r.d(1),r=null),c[2]?s?s.p(c,a):(s=Tt(c),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(c){c&&w(t),i&&i.d(),r&&r.d(),s&&s.d()}}}function ro(e){let t,n;return t=new it({props:{$$slots:{map:[io],sidebar:[oo]},$$scope:{ctx:e}}}),{c(){K(t.$$.fragment)},m(o,i){H(t,o,i),n=!0},p(o,[i]){const r={};i&131087&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){X(t,o)}}}function so(e,t,n){let o,i,r;I(e,q,f=>n(4,i=f)),I(e,be,f=>n(5,r=f));let s=!0,c=!0,a=!0;const l=()=>q.set({mode:"neutral"});function u(){s=this.checked,n(0,s)}function p(){c=this.checked,n(1,c)}function m(){a=this.checked,n(2,a)}return e.$$.update=()=>{e.$$.dirty&48&&n(3,o=JSON.parse(r.findIntersectionGeometry(i.intersection.properties.id)))},[s,c,a,o,i,r,l,u,p,m]}class lo extends oe{constructor(t){super(),ne(this,t,so,ro,U,{})}}const ao=e=>({}),Dt=e=>({}),co=e=>({}),Ot=e=>({});function uo(e){let t,n,o,i;const r=e[1].left,s=xe(r,e,e[0],Ot),c=e[1].main,a=xe(c,e,e[0],Dt);return{c(){t=g("div"),s&&s.c(),n=D(),o=g("div"),a&&a.c(),b(t,"class","left svelte-1anhf6p"),b(o,"class","main svelte-1anhf6p")},m(l,u){k(l,t,u),s&&s.m(t,null),k(l,n,u),k(l,o,u),a&&a.m(o,null),i=!0},p(l,[u]){s&&s.p&&(!i||u&1)&&Be(s,r,l,l[0],i?Ie(r,l[0],u,co):Te(l[0]),Ot),a&&a.p&&(!i||u&1)&&Be(a,c,l,l[0],i?Ie(c,l[0],u,ao):Te(l[0]),Dt)},i(l){i||(z(s,l),z(a,l),i=!0)},o(l){P(s,l),P(a,l),i=!1},d(l){l&&(w(t),w(n),w(o)),s&&s.d(l),a&&a.d(l)}}}function fo(e,t,n){let{$$slots:o={},$$scope:i}=t;return e.$$set=r=>{"$$scope"in r&&n(0,i=r.$$scope)},[i,o]}class ho extends oe{constructor(t){super(),ne(this,t,fo,uo,U,{})}}function Rt(e,t,n){const o=e.slice();return o[3]=t[n][0],o[4]=t[n][1],o}function Wt(e){let t,n,o;function i(l,u){if(l[0].geometry.type=="LineString")return mo;if(l[0].geometry.type=="Point")return po}let r=i(e),s=r&&r(e),c=A(Object.entries(e[0].properties)),a=[];for(let l=0;l<c.length;l+=1)a[l]=Vt(Rt(e,c,l));return{c(){s&&s.c(),t=D(),n=g("table"),o=g("tbody");for(let l=0;l<a.length;l+=1)a[l].c()},m(l,u){s&&s.m(l,u),k(l,t,u),k(l,n,u),d(n,o);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(o,null)},p(l,u){if(r===(r=i(l))&&s?s.p(l,u):(s&&s.d(1),s=r&&r(l),s&&(s.c(),s.m(t.parentNode,t))),u&1){c=A(Object.entries(l[0].properties));let p;for(p=0;p<c.length;p+=1){const m=Rt(l,c,p);a[p]?a[p].p(m,u):(a[p]=Vt(m),a[p].c(),a[p].m(o,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=c.length}},d(l){l&&(w(t),w(n)),s&&s.d(l),ee(a,l)}}}function po(e){let t,n,o,i;return{c(){t=g("div"),n=g("button"),n.textContent="Intersection geometry",b(n,"class","svelte-18ruhw5")},m(r,s){k(r,t,s),d(t,n),o||(i=B(n,"click",e[2]),o=!0)},p:T,d(r){r&&w(t),o=!1,i()}}}function mo(e){let t,n,o,i;return{c(){t=g("div"),n=g("button"),n.textContent="Find width",b(n,"class","svelte-18ruhw5")},m(r,s){k(r,t,s),d(t,n),o||(i=B(n,"click",e[1]),o=!0)},p:T,d(r){r&&w(t),o=!1,i()}}}function Vt(e){let t,n,o=e[3]+"",i,r,s=e[4]+"",c;return{c(){t=g("tr"),n=g("td"),i=Z(o),r=g("td"),c=Z(s),b(n,"class","svelte-18ruhw5"),b(r,"class","svelte-18ruhw5")},m(a,l){k(a,t,l),d(t,n),d(n,i),d(t,r),d(r,c)},p(a,l){l&1&&o!==(o=a[3]+"")&&se(i,o),l&1&&s!==(s=a[4]+"")&&se(c,s)},d(a){a&&w(t)}}}function _o(e){let t,n=e[0]&&Wt(e);return{c(){t=g("div"),n&&n.c(),b(t,"slot","sidebar")},m(o,i){k(o,t,i),n&&n.m(t,null)},p(o,i){o[0]?n?n.p(o,i):(n=Wt(o),n.c(),n.m(t,null)):n&&(n.d(1),n=null)},d(o){o&&w(t),n&&n.d()}}}function go(e){let t,n;return t=new it({props:{$$slots:{sidebar:[_o]},$$scope:{ctx:e}}}),{c(){K(t.$$.fragment)},m(o,i){H(t,o,i),n=!0},p(o,[i]){const r={};i&129&&(r.$$scope={dirty:i,ctx:o}),t.$set(r)},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){X(t,o)}}}function vo(e,t,n){let o;return I(e,He,s=>n(0,o=s)),[o,()=>q.set({mode:"find-width",road:o}),()=>q.set({mode:"intersection-geometry",intersection:o})]}class bo extends oe{constructor(t){super(),ne(this,t,vo,go,U,{})}}function wo(e){let t,n,o,i,r,s,c,a,l,u,p,m;return n=new Un({}),{c(){t=g("div"),K(n.$$.fragment),o=D(),i=g("div"),r=g("label"),s=g("input"),c=Z(` Show calculated
        road widths`),a=D(),l=g("div"),b(s,"type","checkbox"),b(t,"slot","left")},m(f,_){k(f,t,_),H(n,t,null),d(t,o),d(t,i),d(i,r),d(r,s),s.checked=e[2],d(r,c),d(t,a),d(t,l),e[6](l),u=!0,p||(m=B(s,"change",e[5]),p=!0)},p(f,_){_&4&&(s.checked=f[2])},i(f){u||(z(n.$$.fragment,f),u=!0)},o(f){P(n.$$.fragment,f),u=!1},d(f){f&&w(t),X(n),e[6](null),p=!1,m()}}}function qt(e){let t,n;return t=new On({props:{gj:JSON.parse(e[1].render())}}),{c(){K(t.$$.fragment)},m(o,i){H(t,o,i),n=!0},p(o,i){const r={};i&2&&(r.gj=JSON.parse(o[1].render())),t.$set(r)},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){X(t,o)}}}function jt(e){let t,n,o=e[1]&&qt(e);return{c(){o&&o.c(),t=W()},m(i,r){o&&o.m(i,r),k(i,t,r),n=!0},p(i,r){i[1]?o?(o.p(i,r),r&2&&z(o,1)):(o=qt(i),o.c(),z(o,1),o.m(t.parentNode,t)):o&&(et(),P(o,1,1,()=>{o=null}),tt())},i(i){n||(z(o),n=!0)},o(i){P(o),n=!1},d(i){i&&w(t),o&&o.d(i)}}}function yo(e){let t,n=e[1],o,i=jt(e);return{c(){t=g("div"),i.c(),b(t,"slot","main"),Me(t,"position","relative"),Me(t,"width","100%"),Me(t,"height","100vh")},m(r,s){k(r,t,s),i.m(t,null),o=!0},p(r,s){s&2&&U(n,n=r[1])?(et(),P(i,1,1,T),tt(),i=jt(r),i.c(),z(i,1),i.m(t,null)):i.p(r,s)},i(r){o||(z(i),o=!0)},o(r){P(i),o=!1},d(r){r&&w(t),i.d(r)}}}function ko(e){let t,n;return t=new lo({}),{c(){K(t.$$.fragment)},m(o,i){H(t,o,i),n=!0},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){X(t,o)}}}function So(e){let t,n;return t=new no({}),{c(){K(t.$$.fragment)},m(o,i){H(t,o,i),n=!0},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){X(t,o)}}}function Mo(e){let t,n;return t=new bo({}),{c(){K(t.$$.fragment)},m(o,i){H(t,o,i),n=!0},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){P(t.$$.fragment,o),n=!1},d(o){X(t,o)}}}function Eo(e){let t,n,o,i,r,s;t=new ho({props:{$$slots:{main:[yo],left:[wo]},$$scope:{ctx:e}}});const c=[Mo,So,ko],a=[];function l(u,p){return u[3].mode=="neutral"?0:u[3].mode=="find-width"?1:u[3].mode=="intersection-geometry"?2:-1}return~(o=l(e))&&(i=a[o]=c[o](e)),{c(){K(t.$$.fragment),n=D(),i&&i.c(),r=W()},m(u,p){H(t,u,p),k(u,n,p),~o&&a[o].m(u,p),k(u,r,p),s=!0},p(u,[p]){const m={};p&135&&(m.$$scope={dirty:p,ctx:u}),t.$set(m);let f=o;o=l(u),o!==f&&(i&&(et(),P(a[f],1,1,()=>{a[f]=null}),tt()),~o?(i=a[o],i||(i=a[o]=c[o](u),i.c()),z(i,1),i.m(r.parentNode,r)):i=null)},i(u){s||(z(t.$$.fragment,u),z(i),s=!0)},o(u){P(t.$$.fragment,u),P(i),s=!1},d(u){u&&(w(n),w(r)),X(t,u),~o&&a[o].d(u)}}}function Co(e,t,n){let o,i,r,s;I(e,Ye,u=>n(4,o=u)),I(e,be,u=>n(1,i=u)),I(e,Xe,u=>n(2,r=u)),I(e,q,u=>n(3,s=u));let c;function a(){r=this.checked,Xe.set(r)}function l(u){fe[u?"unshift":"push"](()=>{c=u,n(0,c),n(4,o)})}return e.$$.update=()=>{e.$$.dirty&17&&c&&o&&(n(0,c.innerHTML="",c),c.appendChild(o))},[c,i,r,s,o,a,l]}class $o extends oe{constructor(t){super(),ne(this,t,Co,Eo,U,{})}}new $o({target:document.getElementById("app")});
